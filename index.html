<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá th·ªëng qu·∫£n l√Ω Comment CTV TikTok</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;

        const CommentManager = () => {
            const [selectedCTV, setSelectedCTV] = useState(null);
            const [expandedSections, setExpandedSections] = useState({});
            // Key format: targetCtvId-videoIndex-commenterCtvId (true = ƒë√£ comment, false/undefined = ch∆∞a comment)
            const [completedComments, setCompletedComments] = useState({});
            const [repliedComments, setRepliedComments] = useState({}); // Key format: targetCtvId-videoIndex (true = ƒë√£ reply)
            const [deletedVideos, setDeletedVideos] = useState({}); // Key format: targetCtvId-videoIndex (true = video b·ªã x√≥a)
            const [ctvNotes, setCtvNotes] = useState({}); // Key format: ctvId (string note)
            const [showExportModal, setShowExportModal] = useState(false);
            const [fileName, setFileName] = useState('');
            const [exportType, setExportType] = useState('single'); // 'single' or 'all'
            const [showSettingsModal, setShowSettingsModal] = useState(false);
            const [editingCTV, setEditingCTV] = useState(null);
            const [showEditModal, setShowEditModal] = useState(false);
            const [tempCtvName, setTempCtvName] = useState('');
            const [tempNicks, setTempNicks] = useState([]);
            const [showCTVNameModal, setShowCTVNameModal] = useState(false);
            const [ctvNameModalMode, setCtvNameModalMode] = useState(''); // 'add', 'edit', 'editNicks'
            const [editingCTVId, setEditingCTVId] = useState(null);
            const [tempCTVData, setTempCTVData] = useState([]); 
            const [previewCtvData, setPreviewCtvData] = useState([]);
            const [historyData, setHistoryData] = useState({}); // Key: 'YYYY-MM-DD', Value: {data snapshot}
            const [showHistoryModal, setShowHistoryModal] = useState(false);
            const [selectedHistoryDate, setSelectedHistoryDate] = useState('');
            const [currentDateTime, setCurrentDateTime] = useState(new Date());
            // C·∫•u h√¨nh h·ªá th·ªëng
            const [systemConfig, setSystemConfig] = useState({
                commentsPerVideo: 10,
                videosPerCTV: 3,
                totalCTV: 15
            });

            // D·ªØ li·ªáu CTV c√≥ th·ªÉ ch·ªânh s·ª≠a
            const [ctvData, setCtvData] = useState([
                { id: 1, name: "B·∫£o Hu√¢n", nicks: ["Tr·ªçng ho√†ng", "Baby kajima", "Hachthieuhoang"] },
                { id: 2, name: "Huy Ho√†ng", nicks: ["Truongnhuocnam", "Dangthaouyen", "Lyvantieu"] },
                { id: 3, name: "Trung Ki√™n", nicks: ["Huynh Thanh Hoang", "C·∫≠u ƒë√†o b·∫£nh", "Thanh Huy"] },
                { id: 4, name: "Vi·ªát Nguy·ªÖn", nicks: ["ƒê·ª©c tr·ªçng qu·∫≠n 9", "Siuponaruto", "V≈© Di·ªáp Chi", "T√¥ Huy·ªÅn My"] },
                { id: 5, name: "Xu√¢n An", nicks: ["tinhuy2k2", "daicaduongqua4", "anhypp5"] },
                { id: 6, name: "Qanh", nicks: ["Thanh h·∫±ng", "Thua vua tr√≤ ch∆°i m·ªói c√°i t√™n", "Thy an H·ªì"] },
                { id: 7, name: "QA", nicks: ["Louis Nguy·ªÖn", "Mai s∆°n", "H√†o M√£"] },
                { id: 8, name: "Ki√™n S·∫øu", nicks: ["T·ªëng Quang Linh", "Xa l√† nh·ªõ", "B√¨nh th∆∞·ªùng th√¥i"] },
                { id: 9, name: "Hu·ª≥nh ƒê·ª©c", nicks: ["T√≠n v√µ", "Vinh l√™", "Huy h·ªì"] },
                { id: 10, name: "Nobita", nicks: ["Sang s·∫•m sex‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è", "Ho√†ng Long", "Tienkhoilatao"] },
                { id: 11, name: "Qu·ªëc B·∫£o", nicks: ["Dung lam", "Ng·ªçc v≈©", "Uy√™n tr·∫ßn"] },
                { id: 12, name: "NHV", nicks: ["BƒÉng BƒÉng", "Mai Th·∫£o My", "Mie"] },
                { id: 13, name: "Luy·∫øn", nicks: ["Ph∆∞∆°ng Tu·∫•n", "C√≤n th·ªü c√≤n g·ª°", "Trang Nemo", "Tr·∫ßn VƒÉn Bo"] },
                { id: 14, name: "Ch√≠ B·∫£o", nicks: ["gaumap2024", "bb090702", "baobaoipuuuuu", "baobao472"] },
                { id: 15, name: "B·∫£o Phan", nicks: ["trumfcc", "baobaonpcb", "vuonhoaconca97", "pduyenn610"] }
            ]);

            // C·∫¨P NH·∫¨T C√ÅC H√ÄM X·ª¨ L√ù TH√äM/S·ª¨A/X√ìA ƒê·ªÇ C·∫¨P NH·∫¨T PREVIEW
            const handleAddCTVInSettings = () => {
                if (!tempCtvName.trim()) {
                    alert('T√™n CTV kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!');
                    return;
                }
                
                const newId = Math.max(...previewCtvData.map(c => c.id), 0) + 1;
                const newCTV = {
                    id: newId,
                    name: tempCtvName.trim(),
                    nicks: []
                };
                
                console.log('Adding new CTV to preview:', newCTV); // Debug
                
                // C·∫≠p nh·∫≠t preview
                setPreviewCtvData(prev => {
                    const updated = [...prev, newCTV];
                    console.log('Updated preview data:', updated); // Debug
                    return updated;
                });
                
                // L∆∞u v√†o temp
                setTempCTVData(prev => [...prev, { type: 'add', data: newCTV }]);
                setShowCTVNameModal(false);
                setTempCtvName('');
            };

            const handleEditCTVNameInSettings = () => {
                if (!tempCtvName.trim()) {
                    alert('T√™n CTV kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!');
                    return;
                }
                
                console.log('Editing CTV name:', editingCTVId, 'new name:', tempCtvName); // Debug
                
                // C·∫≠p nh·∫≠t preview
                setPreviewCtvData(prev => {
                    const updated = prev.map(ctv => 
                        ctv.id === editingCTVId 
                            ? { ...ctv, name: tempCtvName.trim() }
                            : ctv
                    );
                    console.log('Updated preview after name edit:', updated); // Debug
                    return updated;
                });
                
                // L∆∞u v√†o temp
                setTempCTVData(prev => [...prev, { 
                    type: 'editName', 
                    ctvId: editingCTVId, 
                    newName: tempCtvName.trim() 
                }]);
                
                setShowCTVNameModal(false);
                setTempCtvName('');
                setEditingCTVId(null);
            };

            const handleDeleteCTVInSettings = (ctvId) => {
                if (previewCtvData.length <= 1) {
                    alert('Kh√¥ng th·ªÉ x√≥a CTV cu·ªëi c√πng!');
                    return;
                }
                
                const ctv = previewCtvData.find(c => c.id === ctvId);
                if (!confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a CTV ${ctv?.name}?`)) {
                    return;
                }
                
                console.log('Deleting CTV from preview:', ctvId); // Debug
                
                // C·∫≠p nh·∫≠t preview
                setPreviewCtvData(prev => {
                    const updated = prev.filter(c => c.id !== ctvId);
                    console.log('Updated preview after delete:', updated); // Debug
                    return updated;
                });
                
                // L∆∞u v√†o temp
                setTempCTVData(prev => [...prev, { type: 'delete', ctvId: ctvId }]);
            };

            const handleEditCTVNicksInSettings = () => {
                if (!editingCTV) return;
                
                const filteredNicks = tempNicks.filter(nick => nick.trim() !== '');
                
                console.log('Editing CTV nicks:', editingCTV.id, 'new nicks:', filteredNicks); // Debug
                
                // C·∫≠p nh·∫≠t preview
                setPreviewCtvData(prev => {
                    const updated = prev.map(ctv => 
                        ctv.id === editingCTV.id 
                            ? { ...ctv, nicks: filteredNicks }
                            : ctv
                    );
                    console.log('Updated preview after nick edit:', updated); // Debug
                    return updated;
                });
                
                // L∆∞u v√†o temp
                setTempCTVData(prev => [...prev, { 
                    type: 'editNicks', 
                    ctvId: editingCTV.id, 
                    newNicks: filteredNicks 
                }]);
                
                setShowEditModal(false);
                setEditingCTV(null);
                setTempNicks([]);
                setTempCtvName('');
            };

            // H√ÄM L∆ØU C√ÄI ƒê·∫∂T - √ÅP D·ª§NG T·∫§T C·∫¢ THAY ƒê·ªîI
            const saveAllSettings = () => {
                console.log('Saving all settings...'); // Debug
                console.log('Preview data:', previewCtvData); // Debug
                console.log('Temp changes:', tempCTVData); // Debug
                
                // B∆Ø·ªöC 1: √Åp d·ª•ng d·ªØ li·ªáu preview v√†o d·ªØ li·ªáu th·∫≠t
                setCtvData([...previewCtvData]);
                setSystemConfig(prev => ({ ...prev, totalCTV: previewCtvData.length }));
                
                console.log('Applied preview data to main ctvData'); // Debug
                
                // B∆Ø·ªöC 2: X·ª≠ l√Ω reset d·ªØ li·ªáu n·∫øu c·∫ßn
                if (tempCTVData.length > 0) {
                    const needResetData = tempCTVData.some(change => 
                        change.type === 'add' || change.type === 'delete' || change.type === 'editNicks'
                    );
                    
                    if (needResetData) {
                        if (confirm('Thay ƒë·ªïi CTV s·∫Ω reset d·ªØ li·ªáu comment. B·∫°n c√≥ ch·∫Øc ch·∫Øn kh√¥ng?')) {
                            setCompletedComments({});
                            setRepliedComments({});
                            setDeletedVideos({});
                            setCtvNotes({});
                            setImageSpamStatus({});
                            console.log('Reset comment data'); // Debug
                        }
                    }
                    
                    // B∆Ø·ªöC 3: X√≥a d·ªØ li·ªáu c·ªßa CTV b·ªã x√≥a
                    tempCTVData.forEach(change => {
                        if (change.type === 'delete') {
                            const ctvId = change.ctvId;
                            console.log('Cleaning up data for deleted CTV:', ctvId); // Debug
                            
                            // X√≥a completed comments
                            setCompletedComments(prev => {
                                const newData = { ...prev };
                                Object.keys(newData).forEach(key => {
                                    const parts = key.split('-');
                                    if (parts[0] == ctvId || parts[2] == ctvId) {
                                        delete newData[key];
                                    }
                                });
                                return newData;
                            });
                            
                            // X√≥a replied comments
                            setRepliedComments(prev => {
                                const newData = { ...prev };
                                Object.keys(newData).forEach(key => {
                                    const parts = key.split('-');
                                    if (parts[0] == ctvId) {
                                        delete newData[key];
                                    }
                                });
                                return newData;
                            });
                            
                            // X√≥a deleted videos
                            setDeletedVideos(prev => {
                                const newData = { ...prev };
                                Object.keys(newData).forEach(key => {
                                    const parts = key.split('-');
                                    if (parts[0] == ctvId) {
                                        delete newData[key];
                                    }
                                });
                                return newData;
                            });
                            
                            // X√≥a c√°c d·ªØ li·ªáu kh√°c
                            setCtvNotes(prev => {
                                const newData = { ...prev };
                                delete newData[ctvId];
                                return newData;
                            });
                            
                            setImageSpamStatus(prev => {
                                const newData = { ...prev };
                                delete newData[ctvId];
                                return newData;
                            });
                            
                            setCtvPenalties(prev => {
                                const newData = { ...prev };
                                delete newData[ctvId];
                                return newData;
                            });
                            
                            setCtvWarnings(prev => {
                                const newData = { ...prev };
                                delete newData[ctvId];
                                return newData;
                            });
                            
                            // Reset selected CTV n·∫øu CTV b·ªã x√≥a ƒëang ƒë∆∞·ª£c ch·ªçn
                            if (selectedCTV === ctvId) {
                                setSelectedCTV(null);
                            }
                        }
                    });
                }
                
                // B∆Ø·ªöC 4: Reset temp data v√† ƒë√≥ng modal
                setTempCTVData([]);
                setShowSettingsModal(false);
                
                console.log('Save completed successfully'); // Debug
                alert('ƒê√£ l∆∞u t·∫•t c·∫£ c√†i ƒë·∫∑t th√†nh c√¥ng!');
            };

            // H√ÄM H·ª¶Y - KH√îNG √ÅP D·ª§NG THAY ƒê·ªîI
            const cancelAllSettings = () => {
                console.log('Cancelling all settings'); // Debug
                setPreviewCtvData([]);
                setTempCTVData([]);
                setShowCTVNameModal(false);
                setShowEditModal(false);
                setTempCtvName('');
                setEditingCTVId(null);
                setEditingCTV(null);
                setTempNicks([]);
                setShowSettingsModal(false);
            };

            const openSettingsModal = () => {
                console.log('Opening settings modal, copying ctvData:', ctvData); // Debug
                setPreviewCtvData([...ctvData]); // Copy d·ªØ li·ªáu hi·ªán t·∫°i
                setTempCTVData([]); // Reset temp changes
                setShowSettingsModal(true);
            };

            // D·ªØ li·ªáu ·∫£nh spam
            const [imageSpamStatus, setImageSpamStatus] = useState({}); // Key: ctvId, Value: {tiktok: number, telegram: number}
            
            // D·ªØ li·ªáu l·ªói v√† c·∫£nh c√°o (persistent)
            const [ctvPenalties, setCtvPenalties] = useState({}); // Key: ctvId, Value: {fine20k: number, halfDayPenalty: number, fullDayPenalty: number}
            const [ctvWarnings, setCtvWarnings] = useState({}); // Key: ctvId, Value: {level: 0-3, description: string}
            
            // Load data t·ª´ localStorage khi component mount
            useEffect(() => {
                try {
                    const savedData = localStorage.getItem('ctvCompletedComments');
                    const savedReplies = localStorage.getItem('ctvRepliedComments');
                    const savedDeleted = localStorage.getItem('ctvDeletedVideos');
                    const savedNotes = localStorage.getItem('ctvNotes');
                    const savedConfig = localStorage.getItem('systemConfig');
                    const savedCtvData = localStorage.getItem('ctvData');
                    const savedImageSpam = localStorage.getItem('imageSpamStatus');
                    const savedPenalties = localStorage.getItem('ctvPenalties');
                    const savedWarnings = localStorage.getItem('ctvWarnings');
                    
                    if (savedData) setCompletedComments(JSON.parse(savedData));
                    if (savedReplies) setRepliedComments(JSON.parse(savedReplies));
                    if (savedDeleted) setDeletedVideos(JSON.parse(savedDeleted));
                    if (savedNotes) setCtvNotes(JSON.parse(savedNotes));
                    if (savedConfig) setSystemConfig(JSON.parse(savedConfig));
                    if (savedCtvData) setCtvData(JSON.parse(savedCtvData));
                    if (savedImageSpam) setImageSpamStatus(JSON.parse(savedImageSpam));
                    if (savedPenalties) setCtvPenalties(JSON.parse(savedPenalties));
                    if (savedWarnings) setCtvWarnings(JSON.parse(savedWarnings));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ load d·ªØ li·ªáu t·ª´ localStorage');
                }
            }, []);

            const saveToHistory = (date = null) => {
                const saveDate = date || new Date().toISOString().split('T')[0];
                const snapshot = {
                    completedComments: { ...completedComments },
                    repliedComments: { ...repliedComments },
                    deletedVideos: { ...deletedVideos },
                    ctvNotes: { ...ctvNotes },
                    imageSpamStatus: { ...imageSpamStatus },
                    ctvPenalties: { ...ctvPenalties },
                    ctvWarnings: { ...ctvWarnings },
                    ctvData: [...ctvData],
                    systemConfig: { ...systemConfig },
                    timestamp: new Date().toISOString()
                };
                
                setHistoryData(prev => ({
                    ...prev,
                    [saveDate]: snapshot
                }));
                
                console.log(`ƒê√£ l∆∞u l·ªãch s·ª≠ ng√†y ${saveDate}`);
            };

            // Load d·ªØ li·ªáu t·ª´ l·ªãch s·ª≠
            const loadFromHistory = (date) => {
                const snapshot = historyData[date];
                if (!snapshot) {
                    alert('Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu ng√†y n√†y!');
                    return;
                }
                
                if (!confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën load l·∫°i d·ªØ li·ªáu ng√†y ${date}? D·ªØ li·ªáu hi·ªán t·∫°i s·∫Ω b·ªã ghi ƒë√®!`)) {
                    return;
                }
                
                // Load l·∫°i t·∫•t c·∫£ d·ªØ li·ªáu
                setCompletedComments(snapshot.completedComments);
                setRepliedComments(snapshot.repliedComments);
                setDeletedVideos(snapshot.deletedVideos);
                setCtvNotes(snapshot.ctvNotes);
                setImageSpamStatus(snapshot.imageSpamStatus || {});
                setCtvPenalties(snapshot.ctvPenalties || {});
                setCtvWarnings(snapshot.ctvWarnings || {});
                setCtvData(snapshot.ctvData);
                setSystemConfig(snapshot.systemConfig);
                
                setShowHistoryModal(false);
                alert(`ƒê√£ load d·ªØ li·ªáu ng√†y ${date} th√†nh c√¥ng!`);
            };

            // X√≥a l·ªãch s·ª≠
            const deleteHistory = (date) => {
                if (!confirm(`B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a l·ªãch s·ª≠ ng√†y ${date}?`)) {
                    return;
                }
                
                setHistoryData(prev => {
                    const newData = { ...prev };
                    delete newData[date];
                    return newData;
                });
                
                alert(`ƒê√£ x√≥a l·ªãch s·ª≠ ng√†y ${date}!`);
            };

            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrentDateTime(new Date());
                }, 1000);
                
                return () => clearInterval(timer);
            }, []);

            // Save data v√†o localStorage khi c√≥ thay ƒë·ªïi
            useEffect(() => {
                try {
                    localStorage.setItem('ctvCompletedComments', JSON.stringify(completedComments));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu v√†o localStorage');
                }
            }, [completedComments]);

            useEffect(() => {
                try {
                    localStorage.setItem('ctvRepliedComments', JSON.stringify(repliedComments));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu reply v√†o localStorage');
                }
            }, [repliedComments]);

            useEffect(() => {
                try {
                    localStorage.setItem('ctvDeletedVideos', JSON.stringify(deletedVideos));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu video b·ªã x√≥a v√†o localStorage');
                }
            }, [deletedVideos]);

            useEffect(() => {
                try {
                    localStorage.setItem('ctvNotes', JSON.stringify(ctvNotes));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u ghi ch√∫ v√†o localStorage');
                }
            }, [ctvNotes]);

            useEffect(() => {
                try {
                    localStorage.setItem('systemConfig', JSON.stringify(systemConfig));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u c·∫•u h√¨nh h·ªá th·ªëng v√†o localStorage');
                }
            }, [systemConfig]);

            useEffect(() => {
                try {
                    localStorage.setItem('ctvData', JSON.stringify(ctvData));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu CTV v√†o localStorage');
                }
            }, [ctvData]);

            useEffect(() => {
                try {
                    localStorage.setItem('imageSpamStatus', JSON.stringify(imageSpamStatus));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u tr·∫°ng th√°i ·∫£nh spam v√†o localStorage');
                }
            }, [imageSpamStatus]);

            useEffect(() => {
                try {
                    localStorage.setItem('ctvPenalties', JSON.stringify(ctvPenalties));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu ph·∫°t v√†o localStorage');
                }
            }, [ctvPenalties]);

            useEffect(() => {
                try {
                    localStorage.setItem('ctvWarnings', JSON.stringify(ctvWarnings));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu c·∫£nh c√°o v√†o localStorage');
                }
            }, [ctvWarnings]);

            // H√ÄM KI·ªÇM TRA V√Ä ƒê·ªíNG B·ªò S·ªê L∆Ø·ª¢NG CTV
            useEffect(() => {
                // ƒê·ªìng b·ªô s·ªë l∆∞·ª£ng CTV th·ª±c t·∫ø v·ªõi config
                if (ctvData.length !== systemConfig.totalCTV) {
                    if (ctvData.length < systemConfig.totalCTV) {
                        // C·∫ßn th√™m CTV
                        const newCtvs = [];
                        for (let i = ctvData.length; i < systemConfig.totalCTV; i++) {
                            newCtvs.push({
                                id: i + 1,
                                name: `CTV ${i + 1}`,
                                nicks: []
                            });
                        }
                        setCtvData(prev => [...prev, ...newCtvs]);
                    }
                    // Kh√¥ng t·ª± ƒë·ªông x√≥a CTV ƒë·ªÉ tr√°nh m·∫•t d·ªØ li·ªáu
                }
            }, [systemConfig.totalCTV]);

            // Load/save history data
            useEffect(() => {
                try {
                    const savedHistory = localStorage.getItem('ctvHistoryData');
                    if (savedHistory) setHistoryData(JSON.parse(savedHistory));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ load d·ªØ li·ªáu l·ªãch s·ª≠ t·ª´ localStorage');
                }
            }, []);

            useEffect(() => {
                try {
                    localStorage.setItem('ctvHistoryData', JSON.stringify(historyData));
                } catch (error) {
                    console.log('Kh√¥ng th·ªÉ l∆∞u d·ªØ li·ªáu l·ªãch s·ª≠ v√†o localStorage');
                }
            }, [historyData]);

            // ƒê√°nh d·∫•u t·∫•t c·∫£ CTV ƒë√£ comment cho 1 video
            const markAllCommentersCompleted = (targetCtvId, videoIndex, completed = true) => {
                const commenters = getCommenters(targetCtvId);
                const updates = {};
                
                commenters.forEach(commenterId => {
                    const key = `${targetCtvId}-${videoIndex}-${commenterId}`;
                    updates[key] = completed;
                });
                
                setCompletedComments(prev => ({
                    ...prev,
                    ...updates
                }));
            };

            // ƒê√°nh d·∫•u t·∫•t c·∫£ CTV ƒë√£ comment cho t·∫•t c·∫£ video c·ªßa 1 CTV
            const markAllVideosCompleted = (targetCtvId, completed = true) => {
                const targetCtv = ctvData.find(c => c.id === targetCtvId);
                if (!targetCtv) return;
                
                const maxVideos = Math.min(systemConfig.videosPerCTV, targetCtv.nicks.length);
                const updates = {};
                
                for (let videoIndex = 0; videoIndex < maxVideos; videoIndex++) {
                    const isVideoDeleted = deletedVideos[`${targetCtvId}-${videoIndex}`];
                    if (!isVideoDeleted) {
                        const commenters = getCommenters(targetCtvId);
                        commenters.forEach(commenterId => {
                            const key = `${targetCtvId}-${videoIndex}-${commenterId}`;
                            updates[key] = completed;
                        });
                    }
                }
                
                setCompletedComments(prev => ({
                    ...prev,
                    ...updates
                }));
            };

            const getCommenters = (targetCtvId) => {
                // T√¨m v·ªã tr√≠ th·ª±c t·∫ø c·ªßa CTV trong m·∫£ng (kh√¥ng ph·∫£i ID)
                const targetCtvIndex = ctvData.findIndex(ctv => ctv.id === targetCtvId);
                if (targetCtvIndex === -1) return [];
                
                const targetPosition = targetCtvIndex + 1; // Position b·∫Øt ƒë·∫ßu t·ª´ 1
                const commenters = [];
                
                // T√≠nh to√°n s·ªë video c·ªßa target CTV
                const targetCtvVideoCount = Math.min(systemConfig.videosPerCTV, ctvData[targetCtvIndex]?.nicks.length || 0);
                
                // V·ªõi m·ªói CTV trong h·ªá th·ªëng
                for (let i = 0; i < systemConfig.totalCTV; i++) {
                    const currentPosition = i + 1;
                    let startPosition = currentPosition + 1;
                    let endPosition = currentPosition + systemConfig.commentsPerVideo;
                    
                    const targetPositions = [];
                    for (let j = startPosition; j <= endPosition; j++) {
                        let actualPosition = j;
                        if (j > systemConfig.totalCTV) actualPosition = j - systemConfig.totalCTV;
                        targetPositions.push(actualPosition);
                    }
                    
                    if (targetPositions.includes(targetPosition)) {
                        // Tr·∫£ v·ªÅ ID c·ªßa CTV ·ªü v·ªã tr√≠ i
                        commenters.push(ctvData[i].id);
                    }
                }
                return commenters;
            };

            const toggleSection = (section) => {
                setExpandedSections(prev => ({
                    ...prev,
                    [section]: !prev[section]
                }));
            };

            const handleCheckboxChange = (targetCtvId, videoIndex, commenterCtvId) => {
                const key = `${targetCtvId}-${videoIndex}-${commenterCtvId}`;
                setCompletedComments(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const handleReplyCheckboxChange = (targetCtvId, videoIndex) => {
                const key = `${targetCtvId}-${videoIndex}`;
                setRepliedComments(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const handleDeletedVideoChange = (targetCtvId, videoIndex) => {
                const key = `${targetCtvId}-${videoIndex}`;
                setDeletedVideos(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            const handleNoteChange = (ctvId, note) => {
                setCtvNotes(prev => ({
                    ...prev,
                    [ctvId]: note
                }));
            };

            const resetData = () => {
                if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën reset d·ªØ li·ªáu comment? L·ªói v√† c·∫£nh c√°o s·∫Ω ƒë∆∞·ª£c gi·ªØ l·∫°i!')) {
                    setCompletedComments({});
                    setRepliedComments({});
                    setDeletedVideos({});
                    setCtvNotes({});
                    setImageSpamStatus({});
                    localStorage.removeItem('ctvCompletedComments');
                    localStorage.removeItem('ctvRepliedComments');
                    localStorage.removeItem('ctvDeletedVideos');
                    localStorage.removeItem('ctvNotes');
                    localStorage.removeItem('imageSpamStatus');
                    alert('ƒê√£ reset d·ªØ li·ªáu comment th√†nh c√¥ng! L·ªói v√† c·∫£nh c√°o ƒë∆∞·ª£c gi·ªØ l·∫°i.');
                }
            };

            // T√≠nh t·ª∑ l·ªá ho√†n th√†nh cho t·ª´ng video (t√≠nh theo s·ªë CTV ƒë√£ ƒë√°nh d·∫•u ho√†n th√†nh)
            const getVideoCompletionRate = (targetCtvId, videoIndex) => {
                const targetCtvData = ctvData.find(c => c.id === targetCtvId);
                if (!targetCtvData) return 0;
                
                // Ki·ªÉm tra xem video c√≥ t·ªìn t·∫°i kh√¥ng
                if (videoIndex >= targetCtvData.nicks.length) return 0;
                
                const commenters = getCommenters(targetCtvId);
                let completedCount = 0;
                
                commenters.forEach(commenterId => {
                    const key = `${targetCtvId}-${videoIndex}-${commenterId}`;
                    if (completedComments[key]) {
                        completedCount++; // ƒê√£ tick = ƒë√£ ho√†n th√†nh
                    }
                });
                
                return commenters.length > 0 ? Math.round((completedCount / commenters.length) * 100) : 0;
            };

            // T√≠nh t·ª∑ l·ªá ho√†n th√†nh t·ªïng cho CTV
            const getOverallCompletionRate = (targetCtvId) => {
                const targetCtvData = ctvData.find(c => c.id === targetCtvId);
                if (!targetCtvData) return 0;
                
                const actualVideoCount = Math.min(systemConfig.videosPerCTV, targetCtvData.nicks.length);
                if (actualVideoCount === 0) return 0;
                
                let totalRate = 0;
                for (let i = 0; i < actualVideoCount; i++) {
                    totalRate += getVideoCompletionRate(targetCtvId, i);
                }
                
                const commentRate = totalRate / actualVideoCount;
                
                // T√≠nh ƒëi·ªÉm ·∫£nh spam (10% c·ªßa t·ªïng ƒëi·ªÉm)
                const imageSpam = imageSpamStatus[targetCtvId] || { tiktok: 0, telegram: 0 };
                const maxImageSpam = 15 + 5; // TikTok max 15 + Telegram max 5 = 20
                const currentImageSpam = imageSpam.tiktok + imageSpam.telegram;
                const imageSpamRate = Math.round((currentImageSpam / maxImageSpam) * 10); // 10% c·ªßa t·ªïng ƒëi·ªÉm
                
                const finalRate = Math.min(100, Math.round(commentRate * 0.9 + imageSpamRate));
                
                return finalRate === 100 ? 'DONE' : `${finalRate}%`;
            };

            // T√≠nh l∆∞∆°ng sau tr·ª´ ph·∫°t
            const calculateSalary = (ctvId) => {
                const baseSalary = 1100000; // 1tr1
                const penalties = ctvPenalties[ctvId] || { fine20k: 0, halfDayPenalty: 0, fullDayPenalty: 0 };
                const dailySalary = baseSalary / 30; // L∆∞∆°ng 1 ng√†y
                
                const totalDeduction = 
                    (penalties.fine20k * 20000) +
                    (penalties.halfDayPenalty * dailySalary * 0.5) +
                    (penalties.fullDayPenalty * dailySalary);
                
                return baseSalary - totalDeduction;
            };

            // C·∫≠p nh·∫≠t l·ªói
            const updatePenalty = (ctvId, type, value) => {
                setCtvPenalties(prev => ({
                    ...prev,
                    [ctvId]: {
                        ...prev[ctvId],
                        [type]: Math.max(0, value)
                    }
                }));
            };

            // C·∫≠p nh·∫≠t c·∫£nh c√°o
            const updateWarning = (ctvId, level) => {
                const warningLevels = [
                    { level: 0, text: 'B√¨nh th∆∞·ªùng', color: 'bg-gray-100 text-gray-800' },
                    { level: 1, text: 'Nh·∫Øc nh·ªü', color: 'bg-blue-100 text-blue-800' },
                    { level: 2, text: 'C·∫£nh c√°o', color: 'bg-yellow-100 text-yellow-800' },
                    { level: 3, text: 'C·∫£nh c√°o l·∫ßn 2', color: 'bg-orange-100 text-orange-800' },
                    { level: 4, text: 'ƒêu·ªïi vi·ªác', color: 'bg-red-100 text-red-800' }
                ];
                
                setCtvWarnings(prev => ({
                    ...prev,
                    [ctvId]: {
                        level: level,
                        text: warningLevels[level].text,
                        color: warningLevels[level].color
                    }
                }));
            };

            // C·∫≠p nh·∫≠t ·∫£nh spam
            const updateImageSpam = (ctvId, type, value) => {
                setImageSpamStatus(prev => ({
                    ...prev,
                    [ctvId]: {
                        ...prev[ctvId],
                        [type]: Math.max(0, Math.min(type === 'tiktok' ? 15 : 5, value))
                    }
                }));
            };

            // Di chuy·ªÉn CTV trong danh s√°ch (gi·ªØ nguy√™n v·ªã tr√≠ s·ªë th·ª© t·ª±)
            const moveCTV = (ctvId, direction) => {
                const currentIndex = ctvData.findIndex(ctv => ctv.id === ctvId);
                if (currentIndex === -1) return;
                
                const newIndex = direction === 'up' ? currentIndex - 1 : currentIndex + 1;
                if (newIndex < 0 || newIndex >= ctvData.length) return;
                
                const newCtvData = [...ctvData];
                // Ch·ªâ ho√°n ƒë·ªïi th√¥ng tin CTV, gi·ªØ nguy√™n ID (v·ªã tr√≠ s·ªë th·ª© t·ª±)
                const temp = { ...newCtvData[currentIndex] };
                newCtvData[currentIndex] = { ...newCtvData[newIndex], id: newCtvData[currentIndex].id };
                newCtvData[newIndex] = { ...temp, id: newCtvData[newIndex].id };
                setCtvData(newCtvData);
            };

            // T√≠nh khung gi·ªù cho t·ª´ng v·ªã tr√≠ (9h ƒë·∫øn 23h)
            const getTimeSlot = (position) => {
                const startHour = 9;
                const hour = startHour + (position - 1);
                return `${hour}:00`;
            };

            // Ki·ªÉm tra xem c√≥ th·ªÉ b·ªè tick reply kh√¥ng (t·∫•t c·∫£ comment ph·∫£i ƒë∆∞·ª£c ho√†n th√†nh)
            const canUntickReply = (targetCtvId, videoIndex) => {
                const commenters = getCommenters(targetCtvId);
                return commenters.every(commenterId => {
                    const key = `${targetCtvId}-${videoIndex}-${commenterId}`;
                    return completedComments[key] === true;
                });
            };

            // Ki·ªÉm tra xem c√≥ comment n√†o ƒë∆∞·ª£c ho√†n th√†nh kh√¥ng
            const hasAnyCompletedComments = (targetCtvId, videoIndex) => {
                const commenters = getCommenters(targetCtvId);
                return commenters.some(commenterId => {
                    const key = `${targetCtvId}-${videoIndex}-${commenterId}`;
                    return completedComments[key] === true;
                });
            };

            // X·ª≠ l√Ω thay ƒë·ªïi reply checkbox v·ªõi validation
            const handleReplyCheckboxChangeWithValidation = (targetCtvId, videoIndex) => {
                const key = `${targetCtvId}-${videoIndex}`;
                const currentReplyStatus = repliedComments[key];
                
                if (!currentReplyStatus) {
                    // ƒêang mu·ªën tick reply - ki·ªÉm tra xem c√≥ √≠t nh·∫•t 1 comment ƒë∆∞·ª£c ho√†n th√†nh kh√¥ng
                    if (!hasAnyCompletedComments(targetCtvId, videoIndex)) {
                        alert('C·∫ßn c√≥ √≠t nh·∫•t 1 comment ƒë∆∞·ª£c ho√†n th√†nh tr∆∞·ªõc khi c√≥ th·ªÉ reply!');
                        return;
                    }
                }
                
                setRepliedComments(prev => ({
                    ...prev,
                    [key]: !prev[key]
                }));
            };

            // M·ªü modal ch·ªânh s·ª≠a CTV
            const openEditCTVModal = (ctv) => {
                setEditingCTV(ctv);
                setTempCtvName(ctv.name);
                setTempNicks([...ctv.nicks]);
                setShowEditModal(true);
            };

            // H√†m m·ªü modal th√™m CTV
            const openAddCTVModal = () => {
                setTempCtvName('');
                setCtvNameModalMode('add');
                setShowCTVNameModal(true);
            };

            // H√†m m·ªü modal s·ª≠a t√™n CTV
            const openEditCTVNameModal = (ctv) => {
                setTempCtvName(ctv.name);
                setEditingCTVId(ctv.id);
                setCtvNameModalMode('edit');
                setShowCTVNameModal(true);
            };

            // H√†m m·ªü modal s·ª≠a nick CTV
            const openEditCTVNicksModal = (ctv) => {
                setEditingCTV(ctv);
                setTempCtvName(ctv.name);
                setTempNicks([...ctv.nicks]);
                setCtvNameModalMode('editNicks');
                setShowEditModal(true);
            };

            // 7. H√†m l∆∞u t·∫•t c·∫£ thay ƒë·ªïi
            const saveAllCTVChanges = () => {
                if (tempCTVData.length === 0) {
                    alert('Kh√¥ng c√≥ thay ƒë·ªïi n√†o ƒë·ªÉ l∆∞u!');
                    return;
                }
                
                let newCtvData = [...ctvData];
                let needResetData = false;
                
                tempCTVData.forEach(change => {
                    switch(change.type) {
                        case 'add':
                            newCtvData.push(change.data);
                            needResetData = true;
                            break;
                            
                        case 'editName':
                            newCtvData = newCtvData.map(ctv => 
                                ctv.id === change.ctvId 
                                    ? { ...ctv, name: change.newName }
                                    : ctv
                            );
                            break;
                            
                        case 'delete':
                            // X√≥a d·ªØ li·ªáu li√™n quan
                            const newCompletedComments = { ...completedComments };
                            const newRepliedComments = { ...repliedComments };
                            const newDeletedVideos = { ...deletedVideos };
                            const newCtvNotes = { ...ctvNotes };
                            const newImageSpamStatus = { ...imageSpamStatus };
                            const newCtvPenalties = { ...ctvPenalties };
                            const newCtvWarnings = { ...ctvWarnings };
                            
                            Object.keys(newCompletedComments).forEach(key => {
                                const parts = key.split('-');
                                if (parts[0] == change.ctvId || parts[2] == change.ctvId) {
                                    delete newCompletedComments[key];
                                }
                            });
                            
                            Object.keys(newRepliedComments).forEach(key => {
                                const parts = key.split('-');
                                if (parts[0] == change.ctvId) {
                                    delete newRepliedComments[key];
                                }
                            });
                            
                            Object.keys(newDeletedVideos).forEach(key => {
                                const parts = key.split('-');
                                if (parts[0] == change.ctvId) {
                                    delete newDeletedVideos[key];
                                }
                            });
                            
                            delete newCtvNotes[change.ctvId];
                            delete newImageSpamStatus[change.ctvId];
                            delete newCtvPenalties[change.ctvId];
                            delete newCtvWarnings[change.ctvId];
                            
                            setCompletedComments(newCompletedComments);
                            setRepliedComments(newRepliedComments);
                            setDeletedVideos(newDeletedVideos);
                            setCtvNotes(newCtvNotes);
                            setImageSpamStatus(newImageSpamStatus);
                            setCtvPenalties(newCtvPenalties);
                            setCtvWarnings(newCtvWarnings);
                            
                            newCtvData = newCtvData.filter(ctv => ctv.id !== change.ctvId);
                            
                            if (selectedCTV === change.ctvId) {
                                setSelectedCTV(null);
                            }
                            needResetData = true;
                            break;
                            
                        case 'editNicks':
                            newCtvData = newCtvData.map(ctv => 
                                ctv.id === change.ctvId 
                                    ? { ...ctv, nicks: change.newNicks }
                                    : ctv
                            );
                            needResetData = true;
                            break;
                    }
                });
                
                // Reset d·ªØ li·ªáu comment n·∫øu c·∫ßn
                if (needResetData) {
                    if (confirm('Thay ƒë·ªïi CTV s·∫Ω reset d·ªØ li·ªáu comment. B·∫°n c√≥ ch·∫Øc ch·∫Øn kh√¥ng?')) {
                        setCompletedComments({});
                        setRepliedComments({});
                        setDeletedVideos({});
                        setCtvNotes({});
                        setImageSpamStatus({});
                    } else {
                        return;
                    }
                }
                
                setCtvData(newCtvData);
                setSystemConfig(prev => ({ ...prev, totalCTV: newCtvData.length }));
                setTempCTVData([]);
                
                alert('ƒê√£ l∆∞u t·∫•t c·∫£ thay ƒë·ªïi CTV th√†nh c√¥ng!');
            };

            // 8. H√†m h·ªßy t·∫•t c·∫£ thay ƒë·ªïi
            const cancelAllCTVChanges = () => {
                setTempCTVData([]);
                setShowCTVNameModal(false);
                setTempCtvName('');
                setEditingCTVId(null);
                alert('ƒê√£ h·ªßy t·∫•t c·∫£ thay ƒë·ªïi!');
            };

            // 9. Th√™m c√°c h√†m x·ª≠ l√Ω nick (c√°c h√†m n√†y ƒë√£ c√≥ nh∆∞ng c·∫ßn ƒë·∫£m b·∫£o)
            const addNewNick = () => {
                setTempNicks(prev => [...prev, '']);
            };

            const removeNick = (index) => {
                setTempNicks(prev => prev.filter((_, i) => i !== index));
            };

            const updateNick = (index, value) => {
                setTempNicks(prev => prev.map((nick, i) => i === index ? value : nick));
            };

            // 11. H√†m hi·ªÉn th·ªã preview thay ƒë·ªïi
            const getPreviewText = () => {
                if (tempCTVData.length === 0) return 'Kh√¥ng c√≥ thay ƒë·ªïi n√†o';
                
                const changes = tempCTVData.map(change => {
                    switch(change.type) {
                        case 'add': return `+ Th√™m CTV "${change.data.name}"`;
                        case 'editName': 
                            const ctv = ctvData.find(c => c.id === change.ctvId);
                            return `‚úèÔ∏è S·ª≠a "${ctv?.name}" ‚Üí "${change.newName}"`;
                        case 'delete':
                            const deleteCTV = ctvData.find(c => c.id === change.ctvId);
                            return `üóëÔ∏è X√≥a CTV "${deleteCTV?.name}"`;
                        case 'editNicks':
                            const editCTV = ctvData.find(c => c.id === change.ctvId);
                            return `üìù S·ª≠a nick CTV "${editCTV?.name}" (${change.newNicks.length} nick)`;
                        default: return '';
                    }
                });
                
                return changes.join('\n');
            };

            const openExportModal = (type) => {
                setExportType(type);
                const defaultName = type === 'single' 
                    ? `CTV_${ctvData.find(c => c.id === selectedCTV)?.name}_BaoCao_${new Date().toISOString().split('T')[0]}`
                    : `TatCa_CTV_BaoCao_${new Date().toISOString().split('T')[0]}`;
                setFileName(defaultName);
                setShowExportModal(true);
            };

            const resetCommentDataAfterConfigChange = () => {
                if (confirm('Thay ƒë·ªïi c·∫•u h√¨nh s·∫Ω reset to√†n b·ªô d·ªØ li·ªáu comment. B·∫°n c√≥ ch·∫Øc ch·∫Øn kh√¥ng?')) {
                    setCompletedComments({});
                    setRepliedComments({});
                    setDeletedVideos({});
                    setCtvNotes({});
                    setImageSpamStatus({});
                    return true;
                }
                return false;
            };

            const exportData = () => {
                    if (!fileName.trim()) {
                        alert('Vui l√≤ng nh·∫≠p t√™n file!');
                        return;
                    }

                    let reportContent = [];
                    
                    if (exportType === 'single') {
                        if (!selectedCTV) {
                            alert('Vui l√≤ng ch·ªçn CTV tr∆∞·ªõc khi xu·∫•t d·ªØ li·ªáu!');
                            return;
                        }

                        const targetCtv = ctvData.find(c => c.id === selectedCTV);
                        const imageSpam = imageSpamStatus[selectedCTV] || { tiktok: 0, telegram: 0 };
                        
                        // Ki·ªÉm tra ƒëi·ªÅu ki·ªán DONE
                        const totalImageSpam = imageSpam.tiktok + imageSpam.telegram;
                        const maxVideos = Math.min(systemConfig.videosPerCTV, targetCtv?.nicks.length || 0);
                        
                        let completedCommentsCount = 0;
                        let allReplied = true;
                        
                        for (let videoIndex = 0; videoIndex < maxVideos; videoIndex++) {
                            const isVideoDeleted = deletedVideos[`${selectedCTV}-${videoIndex}`];
                            const hasReplied = repliedComments[`${selectedCTV}-${videoIndex}`];
                            const commenters = getCommenters(selectedCTV);
                            
                            if (!isVideoDeleted) {
                                if (!hasReplied) {
                                    allReplied = false;
                                }
                                
                                commenters.forEach(commenterId => {
                                    const key = `${selectedCTV}-${videoIndex}-${commenterId}`;
                                    if (completedComments[key]) {
                                        completedCommentsCount++;
                                    }
                                });
                            }
                        }
                        
                        const isDone = totalImageSpam >= 20 && completedCommentsCount >= 14 && allReplied && maxVideos >= 2;
                        
                        if (isDone) {
                            reportContent.push(`CTV ${targetCtv?.name} (s·ªë ${selectedCTV}) - DONE`);
                        } else {
                            reportContent.push(`CTV ${targetCtv?.name} (s·ªë ${selectedCTV})`);
                            reportContent.push(''); // D√≤ng tr·ªëng
                            
                            // Chi ti·∫øt t·ª´ng video
                            for (let videoIndex = 0; videoIndex < maxVideos; videoIndex++) {
                                const isVideoDeleted = deletedVideos[`${selectedCTV}-${videoIndex}`];
                                const hasReplied = repliedComments[`${selectedCTV}-${videoIndex}`];
                                const commenters = getCommenters(selectedCTV);
                                
                                if (isVideoDeleted) {
                                    reportContent.push(`‚Ä¢ Video ${videoIndex + 1}: b·ªã x√≥a`);
                                } else {
                                    const missingCommenters = [];
                                    commenters.forEach(commenterId => {
                                        const key = `${selectedCTV}-${videoIndex}-${commenterId}`;
                                        if (!completedComments[key]) {
                                            const commenterCtv = ctvData.find(c => c.id === commenterId);
                                            missingCommenters.push(commenterCtv?.name);
                                        }
                                    });
                                    
                                    if (missingCommenters.length === 0) {
                                        if (hasReplied) {
                                            reportContent.push(`‚Ä¢ Video ${videoIndex + 1}: Done`);
                                        } else {
                                            reportContent.push(`‚Ä¢ Video ${videoIndex + 1}: m·ªçi ng∆∞·ªùi ƒë√£ rep ƒë·ªß cmt nh∆∞ng ch∆∞a rep l·∫°i`);
                                        }
                                    } else {
                                        reportContent.push(`‚Ä¢ Video ${videoIndex + 1}: ${missingCommenters.join(', ')} ch∆∞a cmt`);
                                    }
                                }
                            }
                            
                            reportContent.push(''); // D√≤ng tr·ªëng
                            
                            // Th√¥ng tin ·∫£nh spam
                            if (imageSpam.tiktok === 0 && imageSpam.telegram === 0) {
                                reportContent.push('‚Ä¢ Ch∆∞a b√°o ·∫£nh spam tiktok v√† tele');
                            } else {
                                if (imageSpam.tiktok < 15) {
                                    reportContent.push(`‚Ä¢ ·∫¢nh spam tiktok thi·∫øu ${15 - imageSpam.tiktok} ·∫£nh`);
                                } else {
                                    reportContent.push('‚Ä¢ ·∫¢nh spam tiktok ƒë·ªß 15 ·∫£nh');
                                }
                                
                                if (imageSpam.telegram < 5) {
                                    reportContent.push(`‚Ä¢ ·∫¢nh spam tele thi·∫øu ${5 - imageSpam.telegram} ·∫£nh`);
                                } else {
                                    reportContent.push('‚Ä¢ ·∫¢nh spam tele ƒë·ªß 5 ·∫£nh');
                                }
                            }
                        }
                        
                    } else {
                        // Xu·∫•t t·∫•t c·∫£ CTV
                        reportContent.push('B√ÅO C√ÅO T·ªîNG QUAN T·∫§T C·∫¢ CTV');
                        reportContent.push('='.repeat(50));
                        reportContent.push('');
                        
                        ctvData.forEach((ctv, index) => {
                            const imageSpam = imageSpamStatus[ctv.id] || { tiktok: 0, telegram: 0 };
                            
                            // Ki·ªÉm tra ƒëi·ªÅu ki·ªán DONE
                            const totalImageSpam = imageSpam.tiktok + imageSpam.telegram;
                            const maxVideos = Math.min(systemConfig.videosPerCTV, ctv.nicks.length);
                            
                            let completedCommentsCount = 0;
                            let allReplied = true;
                            
                            for (let videoIndex = 0; videoIndex < maxVideos; videoIndex++) {
                                const isVideoDeleted = deletedVideos[`${ctv.id}-${videoIndex}`];
                                const hasReplied = repliedComments[`${ctv.id}-${videoIndex}`];
                                const commenters = getCommenters(ctv.id);
                                
                                if (!isVideoDeleted) {
                                    if (!hasReplied) {
                                        allReplied = false;
                                    }
                                    
                                    commenters.forEach(commenterId => {
                                        const key = `${ctv.id}-${videoIndex}-${commenterId}`;
                                        if (completedComments[key]) {
                                            completedCommentsCount++;
                                        }
                                    });
                                }
                            }
                            
                            const isDone = totalImageSpam >= 20 && completedCommentsCount >= 14 && allReplied && maxVideos >= 2;
                            
                            if (isDone) {
                                reportContent.push(`${index + 1}. CTV ${ctv.name} (s·ªë ${ctv.id}) - ‚úÖ DONE`);
                            } else {
                                reportContent.push(`${index + 1}. CTV ${ctv.name} (s·ªë ${ctv.id})`);
                                
                                // Chi ti·∫øt t·ª´ng video
                                for (let videoIndex = 0; videoIndex < maxVideos; videoIndex++) {
                                    const isVideoDeleted = deletedVideos[`${ctv.id}-${videoIndex}`];
                                    const hasReplied = repliedComments[`${ctv.id}-${videoIndex}`];
                                    const commenters = getCommenters(ctv.id);
                                    
                                    if (isVideoDeleted) {
                                        reportContent.push(`   ‚Ä¢ Video ${videoIndex + 1}: b·ªã x√≥a`);
                                    } else {
                                        const missingCommenters = [];
                                        commenters.forEach(commenterId => {
                                            const key = `${ctv.id}-${videoIndex}-${commenterId}`;
                                            if (!completedComments[key]) {
                                                const commenterCtv = ctvData.find(c => c.id === commenterId);
                                                missingCommenters.push(commenterCtv?.name);
                                            }
                                        });
                                        
                                        if (missingCommenters.length === 0) {
                                            if (hasReplied) {
                                                reportContent.push(`   ‚Ä¢ Video ${videoIndex + 1}: Done`);
                                            } else {
                                                reportContent.push(`   ‚Ä¢ Video ${videoIndex + 1}: m·ªçi ng∆∞·ªùi ƒë√£ rep ƒë·ªß cmt nh∆∞ng ch∆∞a rep l·∫°i`);
                                            }
                                        } else {
                                            reportContent.push(`   ‚Ä¢ Video ${videoIndex + 1}: ${missingCommenters.join(', ')} ch∆∞a cmt`);
                                        }
                                    }
                                }
                                
                                // Th√¥ng tin ·∫£nh spam
                                if (imageSpam.tiktok === 0 && imageSpam.telegram === 0) {
                                    reportContent.push('   ‚Ä¢ Ch∆∞a b√°o ·∫£nh spam tiktok v√† tele');
                                } else {
                                    if (imageSpam.tiktok < 15) {
                                        reportContent.push(`   ‚Ä¢ ·∫¢nh spam tiktok thi·∫øu ${15 - imageSpam.tiktok} ·∫£nh`);
                                    } else {
                                        reportContent.push('   ‚Ä¢ ·∫¢nh spam tiktok ƒë·ªß 15 ·∫£nh');
                                    }
                                    
                                    if (imageSpam.telegram < 5) {
                                        reportContent.push(`   ‚Ä¢ ·∫¢nh spam tele thi·∫øu ${5 - imageSpam.telegram} ·∫£nh`);
                                    } else {
                                        reportContent.push('   ‚Ä¢ ·∫¢nh spam tele ƒë·ªß 5 ·∫£nh');
                                    }
                                }
                            }
                            
                            if (index < ctvData.length - 1) {
                                reportContent.push(''); // D√≤ng tr·ªëng gi·ªØa c√°c CTV
                                reportContent.push('-'.repeat(30));
                                reportContent.push('');
                            }
                        });
                    }

                    // T·∫°o HTML content cho PDF
                    const htmlContent = `
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <meta charset="UTF-8">
                            <title>${fileName}</title>
                            <style>
                                body {
                                    font-family: 'Times New Roman', Times, serif;
                                    line-height: 1.6;
                                    margin: 40px;
                                    color: #333;
                                }
                                h1 {
                                    text-align: center;
                                    color: #2563eb;
                                    border-bottom: 3px solid #2563eb;
                                    padding-bottom: 10px;
                                    margin-bottom: 30px;
                                }
                                h2 {
                                    color: #1d4ed8;
                                    margin-top: 25px;
                                    margin-bottom: 15px;
                                }
                                .header-info {
                                    background-color: #f8fafc;
                                    padding: 15px;
                                    border-left: 4px solid #2563eb;
                                    margin-bottom: 25px;
                                    font-size: 14px;
                                }
                                .content {
                                    white-space: pre-line;
                                    font-size: 14px;
                                    line-height: 1.8;
                                }
                                .done {
                                    color: #059669;
                                    font-weight: bold;
                                    background-color: #ecfdf5;
                                    padding: 5px 10px;
                                    border-radius: 5px;
                                    display: inline-block;
                                }
                                .separator {
                                    margin: 20px 0;
                                    border-top: 1px solid #e5e7eb;
                                }
                                .footer {
                                    margin-top: 40px;
                                    padding-top: 20px;
                                    border-top: 2px solid #e5e7eb;
                                    font-size: 12px;
                                    color: #6b7280;
                                    text-align: center;
                                }
                            </style>
                        </head>
                        <body>
                            <h1>üìä ${exportType === 'single' ? 'B√ÅO C√ÅO CTV ƒê·ªòC L·∫¨P' : 'B√ÅO C√ÅO T·ªîNG QUAN H·ªá TH·ªêNG'}</h1>
                            
                            <div class="header-info">
                                <strong>üìÖ Th√¥ng tin b√°o c√°o:</strong><br>
                                ‚Ä¢ Ng√†y t·∫°o: ${currentDateTime.toLocaleDateString('vi-VN', {
                                    weekday: 'long',
                                    year: 'numeric',
                                    month: 'long',
                                    day: 'numeric'
                                })}<br>
                                ‚Ä¢ Th·ªùi gian: ${currentDateTime.toLocaleTimeString('vi-VN')}<br>
                                ‚Ä¢ Lo·∫°i b√°o c√°o: ${exportType === 'single' ? `CTV ${ctvData.find(c => c.id === selectedCTV)?.name}` : `T·∫•t c·∫£ ${systemConfig.totalCTV} CTV`}<br>
                                ‚Ä¢ T·ªïng video: ${exportType === 'single' ? systemConfig.videosPerCTV : systemConfig.totalCTV * systemConfig.videosPerCTV} video<br>
                                ‚Ä¢ T·ªïng comment: ${exportType === 'single' ? systemConfig.videosPerCTV * systemConfig.commentsPerVideo : systemConfig.totalCTV * systemConfig.videosPerCTV * systemConfig.commentsPerVideo} comment
                            </div>
                            
                            <div class="content">${reportContent.join('\n')}</div>
                            
                            <div class="footer">
                                H·ªá th·ªëng qu·∫£n l√Ω CTV TikTok - B√°o c√°o ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông<br>
                                ¬© ${new Date().getFullYear()} - T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u
                            </div>
                        </body>
                        </html>
                    `;

                    // T·∫°o PDF v√† t·ª± ƒë·ªông t·∫£i v·ªÅ
                    const blob = new Blob([htmlContent], { type: 'text/html;charset=utf-8;' });
                    const link = document.createElement('a');
                    const url = URL.createObjectURL(blob);
                    link.setAttribute('href', url);
                    link.setAttribute('download', `${fileName}.html`);
                    link.style.visibility = 'hidden';
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    URL.revokeObjectURL(url);

                    // T·ª± ƒë·ªông l∆∞u v√†o l·ªãch s·ª≠ khi xu·∫•t file
                    const today = new Date().toISOString().split('T')[0];
                    saveToHistory(today);

                    setShowExportModal(false);
                    
                    // N·∫øu xu·∫•t file t·ªïng, reset d·ªØ li·ªáu
                    if (exportType === 'all') {
                        if (confirm('Xu·∫•t file PDF th√†nh c√¥ng! B·∫°n c√≥ mu·ªën reset d·ªØ li·ªáu comment kh√¥ng? (L·ªói v√† c·∫£nh c√°o s·∫Ω ƒë∆∞·ª£c gi·ªØ l·∫°i)')) {
                            setCompletedComments({});
                            setRepliedComments({});
                            setDeletedVideos({});
                            setCtvNotes({});
                            setImageSpamStatus({});
                            localStorage.removeItem('ctvCompletedComments');
                            localStorage.removeItem('ctvRepliedComments');
                            localStorage.removeItem('ctvDeletedVideos');
                            localStorage.removeItem('ctvNotes');
                            localStorage.removeItem('imageSpamStatus');
                            alert('ƒê√£ reset d·ªØ li·ªáu comment th√†nh c√¥ng! L·ªói v√† c·∫£nh c√°o ƒë∆∞·ª£c gi·ªØ l·∫°i.');
                        }
                    }
                };

            const totalCommentsPerVideo = systemConfig.commentsPerVideo;
            const totalCommentsPerCTV = totalCommentsPerVideo * systemConfig.videosPerCTV;

            return React.createElement('div', { className: "max-w-7xl mx-auto p-3 sm:p-6 bg-gray-50 min-h-screen" },
                React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-3 sm:p-6 mb-4 sm:mb-6" },
                    React.createElement('div', { className: "mb-4" },
                        React.createElement('h1', { className: "text-lg sm:text-2xl font-bold text-gray-800 mb-2 flex items-center" },
                            React.createElement('span', { className: "mr-2" }, 'üí¨'),
                            'H·ªá th·ªëng qu·∫£n l√Ω CTV TikTok - Jason Nguy·ªÖn'
                        ),
                        React.createElement('div', { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2" },
                            React.createElement('div', { className: "flex items-center space-x-4 text-sm text-gray-600" },
                                React.createElement('div', { className: "flex items-center space-x-2" },
                                    React.createElement('span', null, 'üìÖ'),
                                    React.createElement('span', { className: "font-medium" },
                                        `${currentDateTime.toLocaleDateString('vi-VN', {
                                            weekday: 'long',
                                            year: 'numeric',
                                            month: 'long',
                                            day: 'numeric'
                                        })}`
                                    )
                                ),
                                React.createElement('div', { className: "flex items-center space-x-2" },
                                    React.createElement('span', null, 'üïê'),
                                    React.createElement('span', { className: "font-mono font-medium" },
                                        currentDateTime.toLocaleTimeString('vi-VN', {
                                            hour12: false,
                                            hour: '2-digit',
                                            minute: '2-digit',
                                            second: '2-digit'
                                        })
                                    )
                                )
                            ),
                            React.createElement('div', { className: "text-xs text-gray-500" },
                                `C·∫≠p nh·∫≠t: ${currentDateTime.toLocaleString('vi-VN')}`
                            )
                        )
                    ),
                    
                    React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-7 gap-2 sm:gap-4 mb-4 sm:mb-6" },
                        React.createElement('div', { className: "bg-blue-50 p-3 sm:p-4 rounded-lg" },
                            React.createElement('div', { className: "flex items-center text-blue-600 mb-2" },
                                React.createElement('span', { className: "mr-2" }, 'üë•'),
                                React.createElement('span', { className: "font-semibold text-xs sm:text-sm" }, 'T·ªïng CTV')
                            ),
                            React.createElement('div', { className: "text-xl sm:text-2xl font-bold text-blue-800" }, systemConfig.totalCTV)
                        ),
                        
                        React.createElement('div', { className: "bg-green-50 p-3 sm:p-4 rounded-lg" },
                            React.createElement('div', { className: "flex items-center text-green-600 mb-2" },
                                React.createElement('span', { className: "mr-2" }, 'üìπ'),
                                React.createElement('span', { className: "font-semibold text-xs sm:text-sm" }, 'Cmt/Video')
                            ),
                            React.createElement('div', { className: "text-xl sm:text-2xl font-bold text-green-800" }, systemConfig.commentsPerVideo)
                        ),
                        
                        React.createElement('div', { className: "bg-purple-50 p-3 sm:p-4 rounded-lg" },
                            React.createElement('div', { className: "flex items-center text-purple-600 mb-2" },
                                React.createElement('span', { className: "mr-2" }, 'üí¨'),
                                React.createElement('span', { className: "font-semibold text-xs sm:text-sm" }, 'Video/CTV')
                            ),
                            React.createElement('div', { className: "text-xl sm:text-2xl font-bold text-purple-800" }, systemConfig.videosPerCTV)
                        ),
                        
                        React.createElement('div', { className: "bg-orange-50 p-3 sm:p-4 rounded-lg" },
                            React.createElement('button', {
                                onClick: openSettingsModal,
                                className: "w-full bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg text-xs font-medium flex items-center justify-center space-x-1 transition-colors"
                            },
                                React.createElement('span', null, '‚öôÔ∏è'),
                                React.createElement('span', null, 'C√†i ƒë·∫∑t')
                            )
                        ),
                        
                        React.createElement('div', { className: "bg-red-50 p-3 sm:p-4 rounded-lg" },
                            React.createElement('button', {
                                onClick: resetData,
                                className: "w-full bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded-lg text-xs font-medium flex items-center justify-center space-x-1 transition-colors"
                            },
                                React.createElement('span', null, 'üîÑ'),
                                React.createElement('span', null, 'Reset')
                            )
                        ),

                        React.createElement('div', { className: "bg-indigo-50 p-3 sm:p-4 rounded-lg" },
                            React.createElement('button', {
                                onClick: () => setShowHistoryModal(true),
                                className: "w-full bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg text-xs font-medium flex items-center justify-center space-x-1 transition-colors"
                            },
                                React.createElement('span', null, 'üìÖ'),
                                React.createElement('span', null, 'L·ªãch s·ª≠')
                            )
                        ),

                        React.createElement('div', { className: "bg-teal-50 p-3 sm:p-4 rounded-lg" },
                            React.createElement('div', { className: "flex items-center text-teal-600 mb-2" },
                                React.createElement('span', { className: "mr-2" }, '‚è∞'),
                                React.createElement('span', { className: "font-semibold text-xs sm:text-sm" }, 'Th·ªùi gian')
                            ),
                            React.createElement('div', { className: "text-xs sm:text-sm font-bold text-teal-800" }, 
                                currentDateTime.toLocaleTimeString('vi-VN', {
                                    hour12: false,
                                    hour: '2-digit',
                                    minute: '2-digit'
                                })
                            ),
                            React.createElement('div', { className: "text-xs text-teal-600" },
                                currentDateTime.toLocaleDateString('vi-VN', {
                                    day: '2-digit',
                                    month: '2-digit'
                                })
                            )
                        )
                    ),

                    React.createElement('div', { className: "flex flex-col sm:flex-row gap-2 sm:gap-4 mb-4" },
                        React.createElement('button', {
                            onClick: () => openExportModal('all'),
                            className: "flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center justify-center space-x-2 transition-colors"
                        },
                            React.createElement('span', null, 'üìÑ'),
                            React.createElement('span', null, `Xu·∫•t PDF T·ªïng (${systemConfig.totalCTV} CTV)`)
                        ),
                        selectedCTV && React.createElement('button', {
                            onClick: () => openExportModal('single'),
                            className: "flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center justify-center space-x-2 transition-colors"
                        },
                            React.createElement('span', null, 'üìë'),
                            React.createElement('span', null, `Xu·∫•t PDF ${ctvData.find(c => c.id === selectedCTV)?.name}`)
                        )
                    )
                ),

                // Modal c√†i ƒë·∫∑t h·ªá th·ªëng
                showSettingsModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-lg p-4 sm:p-6 w-full max-w-5xl max-h-[90vh] overflow-y-auto" },
                        React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, 'C√†i ƒë·∫∑t h·ªá th·ªëng'),
                        
                        React.createElement('div', { className: "space-y-6" },
                            // C√†i ƒë·∫∑t s·ªë li·ªáu
                            React.createElement('div', { className: "bg-blue-50 p-4 rounded-lg" },
                                React.createElement('h4', { className: "font-semibold text-blue-800 mb-3" }, 'üìä C√†i ƒë·∫∑t s·ªë li·ªáu'),
                                React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-3 gap-4" },
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, 'S·ªë CTV:'),
                                        React.createElement('input', {
                                            type: 'number',
                                            value: systemConfig.totalCTV,
                                            onChange: (e) => {
                                                const newValue = parseInt(e.target.value) || 1;
                                                setSystemConfig(prev => ({...prev, totalCTV: newValue}));
                                            },
                                            className: "w-full p-2 border border-gray-300 rounded-lg",
                                            min: 1,
                                            max: 50
                                        }),
                                        React.createElement('div', { className: "text-xs text-gray-500 mt-1" }, `Preview: ${previewCtvData.length} CTV`)
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, 'Comment/Video:'),
                                        React.createElement('input', {
                                            type: 'number',
                                            value: systemConfig.commentsPerVideo,
                                            onChange: (e) => {
                                                const newValue = parseInt(e.target.value) || 1;
                                                setSystemConfig(prev => ({...prev, commentsPerVideo: newValue}));
                                            },
                                            className: "w-full p-2 border border-gray-300 rounded-lg",
                                            min: 1,
                                            max: 20
                                        })
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, 'Video/CTV:'),
                                        React.createElement('input', {
                                            type: 'number',
                                            value: systemConfig.videosPerCTV,
                                            onChange: (e) => {
                                                const newValue = parseInt(e.target.value) || 1;
                                                setSystemConfig(prev => ({...prev, videosPerCTV: newValue}));
                                            },
                                            className: "w-full p-2 border border-gray-300 rounded-lg",
                                            min: 1,
                                            max: 10
                                        })
                                    )
                                )
                            ),
                            
                            // Qu·∫£n l√Ω CTV v·ªõi preview
                            React.createElement('div', { className: "bg-green-50 p-4 rounded-lg" },
                                React.createElement('div', { className: "flex items-center justify-between mb-3" },
                                    React.createElement('h4', { className: "font-semibold text-green-800" }, `üë• Qu·∫£n l√Ω CTV (${previewCtvData.length})`),
                                    React.createElement('div', { className: "flex items-center space-x-2" },
                                        React.createElement('button', {
                                            onClick: openAddCTVModal,
                                            className: "bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm"
                                        }, '+ Th√™m CTV'),
                                        tempCTVData.length > 0 && React.createElement('span', {
                                            className: "bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs"
                                        }, `${tempCTVData.length} thay ƒë·ªïi`)
                                    )
                                ),
                                React.createElement('div', { className: "space-y-2 max-h-60 overflow-y-auto" },
                                    previewCtvData.map(ctv => 
                                        React.createElement('div', {
                                            key: ctv.id,
                                            className: "flex items-center justify-between bg-white p-3 rounded border"
                                        },
                                            React.createElement('div', { className: "flex-1" },
                                                React.createElement('span', { className: "font-medium" }, `${ctv.id}. ${ctv.name}`),
                                                React.createElement('span', { className: "text-sm text-gray-500 ml-2" }, `(${ctv.nicks.length} nick${ctv.nicks.length > 1 ? 's' : ''})`)
                                            ),
                                            React.createElement('div', { className: "flex items-center space-x-1" },
                                                React.createElement('button', {
                                                    onClick: () => openEditCTVNameModal(ctv),
                                                    className: "bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded text-xs",
                                                    title: 'S·ª≠a t√™n CTV'
                                                }, '‚úèÔ∏è'),
                                                React.createElement('button', {
                                                    onClick: () => openEditCTVNicksModal(ctv),
                                                    className: "bg-purple-500 hover:bg-purple-600 text-white px-2 py-1 rounded text-xs",
                                                    title: 'S·ª≠a nick CTV'
                                                }, 'üìù'),
                                                previewCtvData.length > 1 && React.createElement('button', {
                                                    onClick: () => handleDeleteCTVInSettings(ctv.id),
                                                    className: "bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-xs",
                                                    title: 'X√≥a CTV'
                                                }, 'üóëÔ∏è')
                                            )
                                        )
                                    )
                                )
                            ),
                            
                            // Preview thay ƒë·ªïi
                            tempCTVData.length > 0 && React.createElement('div', { className: "bg-orange-50 p-4 rounded-lg border border-orange-200" },
                                React.createElement('h4', { className: "font-semibold text-orange-800 mb-3" }, `‚ö†Ô∏è Preview: ${tempCTVData.length} thay ƒë·ªïi s·∫Ω ƒë∆∞·ª£c √°p d·ª•ng`),
                                React.createElement('div', { className: "bg-white p-3 rounded border text-sm max-h-32 overflow-y-auto" },
                                    React.createElement('pre', { className: "text-gray-700 whitespace-pre-wrap" }, getPreviewText())
                                )
                            ),
                            
                            // Logic comment preview
                            React.createElement('div', { className: "bg-purple-50 p-4 rounded-lg" },
                                React.createElement('h4', { className: "font-semibold text-purple-800 mb-3" }, 'üéØ Logic comment'),
                                React.createElement('div', { className: "text-sm text-purple-700 space-y-2" },
                                    React.createElement('div', null, `‚Ä¢ ${previewCtvData.length} CTV v√† ${systemConfig.commentsPerVideo} comment/video`),
                                    React.createElement('div', null, `‚Ä¢ CTV s·ªë 1 comment cho CTV 2 ‚Üí ${Math.min(systemConfig.commentsPerVideo + 1, previewCtvData.length)}`),
                                    React.createElement('div', null, `‚Ä¢ M·ªói CTV c√≥ t·ªëi ƒëa ${systemConfig.videosPerCTV} video`),
                                    React.createElement('div', { className: "font-medium pt-2 border-t border-purple-200" },
                                        `T·ªïng: ${previewCtvData.length * systemConfig.videosPerCTV} video, ${previewCtvData.length * systemConfig.videosPerCTV * systemConfig.commentsPerVideo} comment`
                                    )
                                )
                            )
                        ),
                        
                        React.createElement('div', { className: "flex gap-3 mt-6" },
                            React.createElement('button', {
                                onClick: cancelAllSettings,
                                className: "flex-1 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium"
                            }, 'H·ªßy'),
                            React.createElement('button', {
                                onClick: saveAllSettings,
                                className: "flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium"
                            }, `üíæ L∆∞u t·∫•t c·∫£${tempCTVData.length > 0 ? ` (${tempCTVData.length})` : ''}`)
                        )
                    )
                ),

                // Modal xu·∫•t file
                showExportModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-lg p-4 sm:p-6 w-full max-w-md" },
                        React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" },
                            exportType === 'single' ? 'Xu·∫•t file PDF CTV ƒë∆°n l·∫ª' : `Xu·∫•t file PDF t·ªïng ${systemConfig.totalCTV} CTV`
                        ),
                        
                        React.createElement('div', { className: "mb-4" },
                            React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" },
                                'T√™n file:'
                            ),
                            React.createElement('input', {
                                type: 'text',
                                value: fileName,
                                onChange: (e) => setFileName(e.target.value),
                                className: "w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",
                                placeholder: 'Nh·∫≠p t√™n file...'
                            })
                        ),
                        
                        exportType === 'all' && React.createElement('div', { className: "mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg" },
                            React.createElement('p', { className: "text-sm text-yellow-800" },
                                '‚ö†Ô∏è Sau khi xu·∫•t file t·ªïng, h·ªá th·ªëng s·∫Ω h·ªèi b·∫°n c√≥ mu·ªën reset d·ªØ li·ªáu comment kh√¥ng. L·ªói v√† c·∫£nh c√°o s·∫Ω ƒë∆∞·ª£c gi·ªØ l·∫°i.'
                            )
                        ),
                        
                        React.createElement('div', { className: "flex flex-col sm:flex-row gap-2 sm:gap-3" },
                            React.createElement('button', {
                                onClick: () => setShowExportModal(false),
                                className: "flex-1 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors"
                            }, 'H·ªßy'),
                            React.createElement('button', {
                                onClick: exportData,
                                className: "flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors"
                            }, 'Xu·∫•t File')
                        )
                    )
                ),
                
                // Modal th√™m/s·ª≠a t√™n CTV
                showCTVNameModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-lg p-6 w-full max-w-md" },
                        React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" },
                            ctvNameModalMode === 'add' ? 'Th√™m CTV m·ªõi' : 'S·ª≠a t√™n CTV'
                        ),
                        
                        React.createElement('div', { className: "mb-4" },
                            React.createElement('label', { className: "block text-sm font-medium text-gray-700 mb-2" }, 'T√™n CTV:'),
                            React.createElement('input', {
                                type: 'text',
                                value: tempCtvName,
                                onChange: (e) => setTempCtvName(e.target.value),
                                className: "w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",
                                placeholder: 'Nh·∫≠p t√™n CTV...',
                                autoFocus: true,
                                onKeyPress: (e) => {
                                    if (e.key === 'Enter') {
                                        ctvNameModalMode === 'add' ? handleAddCTVInSettings() : handleEditCTVNameInSettings();
                                    }
                                }
                            })
                        ),
                        
                        React.createElement('div', { className: "flex gap-3" },
                            React.createElement('button', {
                                onClick: () => {
                                    setShowCTVNameModal(false);
                                    setTempCtvName('');
                                    setEditingCTVId(null);
                                },
                                className: "flex-1 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg"
                            }, 'H·ªßy'),
                            React.createElement('button', {
                                onClick: ctvNameModalMode === 'add' ? handleAddCTVInSettings : handleEditCTVNameInSettings,
                                className: "flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg"
                            }, ctvNameModalMode === 'add' ? 'Th√™m' : 'S·ª≠a')
                        )
                    )
                ),

                // MODAL CH·ªàNH S·ª¨A CTV
                showEditModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-lg p-4 sm:p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto" },
                        React.createElement('h3', { className: "text-lg font-bold text-gray-800 mb-4" }, 
                            editingCTV ? `Ch·ªânh s·ª≠a nick CTV ${editingCTV.name}` : 'Ch·ªânh s·ª≠a nick CTV'
                        ),
                        
                        React.createElement('div', { className: "space-y-4" },
                            React.createElement('div', { className: "bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg border border-blue-200" },
                                React.createElement('div', { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3" },
                                    React.createElement('div', null,
                                        React.createElement('h3', { className: "font-medium text-gray-800 mb-1 text-sm sm:text-base" }, 'üïê Th·ªùi gian h·ªá th·ªëng'),
                                        React.createElement('div', { className: "text-sm text-gray-600" },
                                            `${currentDateTime.toLocaleDateString('vi-VN', {
                                                weekday: 'long',
                                                year: 'numeric',
                                                month: 'long',
                                                day: 'numeric'
                                            })} - ${currentDateTime.toLocaleTimeString('vi-VN')}`
                                        )
                                    ),
                                    React.createElement('div', { className: "flex items-center space-x-2" },
                                        React.createElement('div', { className: "w-2 h-2 bg-green-500 rounded-full animate-pulse" }),
                                        React.createElement('span', { className: "text-xs text-green-600 font-medium" }, 'H·ªá th·ªëng ho·∫°t ƒë·ªông')
                                    )
                                ),
                                React.createElement('div', { className: "mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs" },
                                    React.createElement('div', { className: "bg-white bg-opacity-60 p-2 rounded" },
                                        React.createElement('div', { className: "text-blue-600 font-medium" }, 'Ng√†y l√†m vi·ªác:'),
                                        React.createElement('div', { className: "text-blue-800" }, 
                                            currentDateTime.getDay() === 0 || currentDateTime.getDay() === 6 ? 'Cu·ªëi tu·∫ßn' : 'Ng√†y l√†m vi·ªác'
                                        )
                                    ),
                                    React.createElement('div', { className: "bg-white bg-opacity-60 p-2 rounded" },
                                        React.createElement('div', { className: "text-purple-600 font-medium" }, 'Ca l√†m vi·ªác:'),
                                        React.createElement('div', { className: "text-purple-800" },
                                            (() => {
                                                const hour = currentDateTime.getHours();
                                                if (hour >= 8 && hour < 12) return 'S√°ng';
                                                if (hour >= 12 && hour < 18) return 'Chi·ªÅu';
                                                if (hour >= 18 && hour < 22) return 'T·ªëi';
                                                return 'Ngo√†i gi·ªù';
                                            })()
                                        )
                                    ),
                                    React.createElement('div', { className: "bg-white bg-opacity-60 p-2 rounded" },
                                        React.createElement('div', { className: "text-orange-600 font-medium" }, 'Tu·∫ßn:'),
                                        React.createElement('div', { className: "text-orange-800" }, 
                                            `Tu·∫ßn ${Math.ceil(currentDateTime.getDate() / 7)}`
                                        )
                                    ),
                                    React.createElement('div', { className: "bg-white bg-opacity-60 p-2 rounded" },
                                        React.createElement('div', { className: "text-teal-600 font-medium" }, 'Th√°ng:'),
                                        React.createElement('div', { className: "text-teal-800" }, 
                                            currentDateTime.toLocaleDateString('vi-VN', { month: 'long' })
                                        )
                                    )
                                )
                            ),

                            // T√™n CTV (ch·ªâ hi·ªÉn th·ªã, kh√¥ng cho s·ª≠a)
                            React.createElement('div', { className: "bg-gray-50 p-3 rounded-lg" },
                                React.createElement('div', { className: "text-sm text-gray-600" }, 'T√™n CTV:'),
                                React.createElement('div', { className: "font-medium text-gray-800" }, tempCtvName)
                            ),
                            
                            // Danh s√°ch nick
                            React.createElement('div', null,
                                React.createElement('div', { className: "flex items-center justify-between mb-2" },
                                    React.createElement('label', { className: "text-sm font-medium text-gray-700" }, 'Danh s√°ch nick:'),
                                    React.createElement('button', {
                                        onClick: addNewNick,
                                        className: "bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm"
                                    }, '+ Th√™m nick')
                                ),
                                React.createElement('div', { className: "space-y-2 max-h-60 overflow-y-auto" },
                                    tempNicks.map((nick, index) =>
                                        React.createElement('div', {
                                            key: index,
                                            className: "flex items-center space-x-2"
                                        },
                                            React.createElement('span', { className: "text-sm text-gray-500 w-8" }, `${index + 1}.`),
                                            React.createElement('input', {
                                                type: 'text',
                                                value: nick,
                                                onChange: (e) => updateNick(index, e.target.value),
                                                className: "flex-1 p-2 border border-gray-300 rounded",
                                                placeholder: `Nick ${index + 1}...`
                                            }),
                                            React.createElement('button', {
                                                onClick: () => removeNick(index),
                                                className: "bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm"
                                            }, 'X√≥a')
                                        )
                                    )
                                )
                            ),
                            
                            // Th√¥ng tin video
                            React.createElement('div', { className: "bg-blue-50 p-3 rounded-lg" },
                                React.createElement('div', { className: "text-sm text-blue-800 mb-2" }, 'üìπ Th√¥ng tin video:'),
                                React.createElement('div', { className: "text-xs text-blue-600 space-y-1" },
                                    React.createElement('div', null, `‚Ä¢ S·ªë video t·ªëi ƒëa theo c√†i ƒë·∫∑t: ${systemConfig.videosPerCTV}`),
                                    React.createElement('div', null, `‚Ä¢ S·ªë nick hi·ªán t·∫°i: ${tempNicks.length}`),
                                    React.createElement('div', null, `‚Ä¢ S·ªë video th·ª±c t·∫ø s·∫Ω c√≥: ${Math.min(systemConfig.videosPerCTV, tempNicks.filter(n => n.trim()).length)}`),
                                    tempNicks.filter(n => n.trim()).length > systemConfig.videosPerCTV && 
                                        React.createElement('div', { className: "text-orange-600" }, 
                                            `‚Ä¢ Nick d·ª± ph√≤ng: ${tempNicks.filter(n => n.trim()).length - systemConfig.videosPerCTV} nick`
                                        )
                                )
                            )
                        ),
                        
                        React.createElement('div', { className: "flex gap-3 mt-6" },
                            React.createElement('button', {
                                onClick: () => {
                                    setShowEditModal(false);
                                    setEditingCTV(null);
                                    setTempNicks([]);
                                    setTempCtvName('');
                                },
                                className: "flex-1 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm font-medium"
                            }, 'H·ªßy'),
                            React.createElement('button', {
                                onClick: handleEditCTVNicksInSettings,
                                className: "flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium"
                            }, 'L∆∞u thay ƒë·ªïi')
                        )
                    )
                ),
                
                // Modal l·ªãch s·ª≠
                showHistoryModal && React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4" },
                    React.createElement('div', { className: "bg-white rounded-lg p-4 sm:p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto" },
                        React.createElement('div', { className: "flex items-center justify-between mb-4" },
                            React.createElement('h3', { className: "text-lg font-bold text-gray-800" }, 'üìÖ L·ªãch s·ª≠ d·ªØ li·ªáu'),
                            React.createElement('div', { className: "flex items-center space-x-2" },
                                React.createElement('button', {
                                    onClick: () => {
                                        const today = new Date().toISOString().split('T')[0];
                                        saveToHistory(today);
                                        alert(`ƒê√£ l∆∞u d·ªØ li·ªáu hi·ªán t·∫°i v√†o ng√†y ${today}!`);
                                    },
                                    className: "bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm"
                                }, 'üíæ L∆∞u h√¥m nay'),
                                React.createElement('button', {
                                    onClick: () => setShowHistoryModal(false),
                                    className: "bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm"
                                }, '‚úï')
                            )
                        ),
                        
                        Object.keys(historyData).length === 0 ? 
                            React.createElement('div', { className: "text-center py-8 text-gray-500" },
                                React.createElement('div', { className: "text-4xl mb-2" }, 'üìÖ'),
                                React.createElement('div', null, 'Ch∆∞a c√≥ l·ªãch s·ª≠ n√†o'),
                                React.createElement('div', { className: "text-sm mt-2" }, 'Xu·∫•t file ho·∫∑c nh·∫•n "L∆∞u h√¥m nay" ƒë·ªÉ t·∫°o l·ªãch s·ª≠')
                            ) :
                            React.createElement('div', { className: "space-y-3" },
                                React.createElement('div', { className: "bg-blue-50 p-3 rounded-lg border border-blue-200" },
                                    React.createElement('div', { className: "text-sm text-blue-800 mb-2 font-medium" }, 
                                        `üìä T·ªïng c·ªông: ${Object.keys(historyData).length} ng√†y l∆∞u tr·ªØ`
                                    )
                                ),
                                
                                Object.keys(historyData)
                                    .sort((a, b) => new Date(b) - new Date(a)) // S·∫Øp x·∫øp t·ª´ m·ªõi ƒë·∫øn c≈©
                                    .map(date => {
                                        const data = historyData[date];
                                        const isToday = date === new Date().toISOString().split('T')[0];
                                        
                                        return React.createElement('div', {
                                            key: date,
                                            className: `bg-white border rounded-lg p-4 ${isToday ? 'border-green-300 bg-green-50' : 'border-gray-200'}`
                                        },
                                            React.createElement('div', { className: "flex items-center justify-between mb-3" },
                                                React.createElement('div', null,
                                                    React.createElement('div', { className: "font-medium text-gray-800" },
                                                        `üìÖ ${date} ${isToday ? '(H√¥m nay)' : ''}`
                                                    ),
                                                    React.createElement('div', { className: "text-sm text-gray-500" },
                                                        `L∆∞u l√∫c: ${new Date(data.timestamp).toLocaleString('vi-VN')}`
                                                    )
                                                ),
                                                React.createElement('div', { className: "flex items-center space-x-2" },
                                                    React.createElement('button', {
                                                        onClick: () => loadFromHistory(date),
                                                        className: "bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm"
                                                    }, 'üìÇ Load'),
                                                    React.createElement('button', {
                                                        onClick: () => deleteHistory(date),
                                                        className: "bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm"
                                                    }, 'üóëÔ∏è')
                                                )
                                            ),
                                            
                                            React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-4 gap-3 text-xs" },
                                                React.createElement('div', { className: "bg-blue-50 p-2 rounded" },
                                                    React.createElement('div', { className: "font-medium text-blue-800" }, 'CTV:'),
                                                    React.createElement('div', { className: "text-blue-700" }, `${data.ctvData?.length || 0} ng∆∞·ªùi`)
                                                ),
                                                React.createElement('div', { className: "bg-green-50 p-2 rounded" },
                                                    React.createElement('div', { className: "font-medium text-green-800" }, 'Comments:'),
                                                    React.createElement('div', { className: "text-green-700" }, `${Object.keys(data.completedComments || {}).length} ho√†n th√†nh`)
                                                ),
                                                React.createElement('div', { className: "bg-yellow-50 p-2 rounded" },
                                                    React.createElement('div', { className: "font-medium text-yellow-800" }, 'Replies:'),
                                                    React.createElement('div', { className: "text-yellow-700" }, `${Object.keys(data.repliedComments || {}).length} video`)
                                                ),
                                                React.createElement('div', { className: "bg-purple-50 p-2 rounded" },
                                                    React.createElement('div', { className: "font-medium text-purple-800" }, 'C·∫£nh c√°o:'),
                                                    React.createElement('div', { className: "text-purple-700" }, `${Object.keys(data.ctvWarnings || {}).length} CTV`)
                                                )
                                            )
                                        );
                                    })
                            )
                    )
                ),
                React.createElement('div', { className: "grid grid-cols-1 lg:grid-cols-2 gap-3 sm:gap-6" },
                    // Danh s√°ch CTV
                    React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-3 sm:p-6" },
                        React.createElement('div', { className: "mb-4" },
                            React.createElement('div', { 
                                className: "flex items-center justify-between cursor-pointer mb-2",
                                onClick: () => toggleSection('ctvList')
                            },
                                React.createElement('h2', { className: "text-lg sm:text-xl font-semibold text-gray-800" }, 'Danh s√°ch CTV'),
                                React.createElement('span', { className: "text-lg sm:text-xl" }, expandedSections.ctvList ? '‚ñº' : '‚ñ∂')
                            ),
                            (expandedSections.ctvList !== false) && React.createElement('div', { className: "flex flex-wrap gap-2 mb-2" },
                                React.createElement('button', {
                                    onClick: () => {
                                        if (confirm('ƒê√°nh d·∫•u T·∫§T C·∫¢ CTV ƒë√£ ho√†n th√†nh t·∫•t c·∫£ comment?')) {
                                            ctvData.forEach(ctv => {
                                                markAllVideosCompleted(ctv.id, true);
                                            });
                                            alert('ƒê√£ ƒë√°nh d·∫•u t·∫•t c·∫£ CTV ho√†n th√†nh!');
                                        }
                                    },
                                    className: "bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-medium flex items-center space-x-1"
                                },
                                    React.createElement('span', null, '‚úÖ'),
                                    React.createElement('span', null, 'T·∫•t c·∫£ CTV ƒë√£ cmt')
                                ),
                                React.createElement('button', {
                                    onClick: () => {
                                        if (confirm('Reset T·∫§T C·∫¢ comment c·ªßa t·∫•t c·∫£ CTV?')) {
                                            setCompletedComments({});
                                            alert('ƒê√£ reset t·∫•t c·∫£ comment!');
                                        }
                                    },
                                    className: "bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-medium flex items-center space-x-1"
                                },
                                    React.createElement('span', null, 'üîÑ'),
                                    React.createElement('span', null, 'Reset t·∫•t c·∫£')
                                )
                            )
                        ),
                        
                        (expandedSections.ctvList !== false) && React.createElement('div', { className: "space-y-3" },
                            ctvData.map((ctv, index) => {
                                const completionPercentage = getOverallCompletionRate(ctv.id);
                                const warning = ctvWarnings[ctv.id] || { level: 0, text: 'B√¨nh th∆∞·ªùng', color: 'bg-gray-100 text-gray-800' };
                                const penalties = ctvPenalties[ctv.id] || { fine20k: 0, halfDayPenalty: 0, fullDayPenalty: 0 };
                                const imageSpam = imageSpamStatus[ctv.id] || { tiktok: 0, telegram: 0 };
                                const salary = calculateSalary(ctv.id);
                                
                                return React.createElement('div', {
                                    key: ctv.id,
                                    className: `p-3 rounded-lg border transition-all ${
                                        selectedCTV === ctv.id 
                                            ? 'bg-blue-100 border-2 border-blue-300' 
                                            : 'bg-gray-50 hover:bg-gray-100 border-gray-200'
                                    }`,
                                },
                                    React.createElement('div', { className: "flex items-center justify-between mb-2" },
                                        React.createElement('div', { className: "flex items-center space-x-2" },
                                            React.createElement('div', { className: "flex flex-col space-y-1" },
                                                index > 0 && React.createElement('button', {
                                                    onClick: () => moveCTV(ctv.id, 'up'),
                                                    className: "text-blue-500 hover:text-blue-700 text-xs"
                                                }, '‚ñ≤'),
                                                index < ctvData.length - 1 && React.createElement('button', {
                                                    onClick: () => moveCTV(ctv.id, 'down'),
                                                    className: "text-blue-500 hover:text-blue-700 text-xs"
                                                }, '‚ñº')
                                            ),
                                            React.createElement('div', {
                                                className: "cursor-pointer",
                                                onClick: () => setSelectedCTV(selectedCTV === ctv.id ? null : ctv.id)
                                            },
                                                React.createElement('span', { className: "font-medium text-gray-800 text-sm sm:text-base" },
                                                    `${ctv.id}. ${ctv.name}`
                                                ),
                                                React.createElement('span', { className: "text-xs sm:text-sm text-gray-500 ml-2" },
                                                    `(${ctv.nicks.length} nick${ctv.nicks.length > 1 ? 's' : ''})`
                                                )
                                            )
                                        ),
                                        React.createElement('div', { className: "flex items-center space-x-1" },
                                            React.createElement('span', { 
                                                className: `text-xs px-2 py-1 rounded ${
                                                    completionPercentage === 'DONE' ? 'bg-green-100 text-green-800' :
                                                    parseInt(completionPercentage) > 0 ? 'bg-yellow-100 text-yellow-800' :
                                                    'bg-red-100 text-red-800'
                                                }`
                                            }, completionPercentage),
                                            React.createElement('span', { className: `text-xs px-1 py-1 rounded ${warning.color}` },
                                                warning.text
                                            )
                                        )
                                    ),
                                    
                                    // Th√¥ng tin l∆∞∆°ng v√† ·∫£nh spam
                                    React.createElement('div', { className: "grid grid-cols-2 gap-2 mb-2 text-xs" },
                                        React.createElement('div', { className: "bg-green-50 p-2 rounded" },
                                            React.createElement('div', { className: "font-medium text-green-800" }, 'L∆∞∆°ng th√°ng:'),
                                            React.createElement('div', { className: "text-green-700" }, `${salary.toLocaleString('vi-VN')}ƒë`)
                                        ),
                                        React.createElement('div', { className: "bg-blue-50 p-2 rounded" },
                                            React.createElement('div', { className: "font-medium text-blue-800" }, '·∫¢nh spam:'),
                                            React.createElement('div', { className: "text-blue-700" }, 
                                                `TT: ${imageSpam.tiktok}/15, TG: ${imageSpam.telegram}/5`
                                            )
                                        )
                                    ),
                                    
                                    selectedCTV === ctv.id && React.createElement('div', { className: "mt-3 pt-3 border-t border-gray-200 space-y-3" },
                                        // C√†i ƒë·∫∑t c·∫£nh c√°o
                                        React.createElement('div', { className: "bg-yellow-50 p-3 rounded-lg" },
                                            React.createElement('div', { className: "font-medium text-yellow-800 mb-2" }, '‚ö†Ô∏è C·∫£nh c√°o:'),
                                            React.createElement('div', { className: "flex flex-wrap gap-1" },
                                                ['B√¨nh th∆∞·ªùng', 'Nh·∫Øc nh·ªü', 'C·∫£nh c√°o', 'C·∫£nh c√°o l·∫ßn 2', 'ƒêu·ªïi vi·ªác'].map((level, idx) =>
                                                    React.createElement('button', {
                                                        key: idx,
                                                        onClick: () => updateWarning(ctv.id, idx),
                                                        className: `text-xs px-2 py-1 rounded border ${
                                                            warning.level === idx ? 'bg-yellow-200 border-yellow-400' : 'bg-white border-gray-300 hover:bg-gray-50'
                                                        }`
                                                    }, level)
                                                )
                                            )
                                        ),
                                        
                                        // C√†i ƒë·∫∑t l·ªói
                                        React.createElement('div', { className: "bg-red-50 p-3 rounded-lg" },
                                            React.createElement('div', { className: "font-medium text-red-800 mb-2" }, 'üí∞ L·ªói v√† ph·∫°t:'),
                                            React.createElement('div', { className: "space-y-2" },
                                                React.createElement('div', { className: "flex items-center justify-between" },
                                                    React.createElement('span', { className: "text-sm" }, 'Ph·∫°t 20k:'),
                                                    React.createElement('div', { className: "flex items-center space-x-1" },
                                                        React.createElement('button', {
                                                            onClick: () => updatePenalty(ctv.id, 'fine20k', penalties.fine20k - 1),
                                                            className: "bg-red-500 text-white px-2 py-1 rounded text-xs"
                                                        }, '-'),
                                                        React.createElement('span', { className: "w-8 text-center text-sm" }, penalties.fine20k),
                                                        React.createElement('button', {
                                                            onClick: () => updatePenalty(ctv.id, 'fine20k', penalties.fine20k + 1),
                                                            className: "bg-red-500 text-white px-2 py-1 rounded text-xs"
                                                        }, '+')
                                                    )
                                                ),
                                                React.createElement('div', { className: "flex items-center justify-between" },
                                                    React.createElement('span', { className: "text-sm" }, 'Ph·∫°t n·ª≠a ng√†y:'),
                                                    React.createElement('div', { className: "flex items-center space-x-1" },
                                                        React.createElement('button', {
                                                            onClick: () => updatePenalty(ctv.id, 'halfDayPenalty', penalties.halfDayPenalty - 1),
                                                            className: "bg-red-500 text-white px-2 py-1 rounded text-xs"
                                                        }, '-'),
                                                        React.createElement('span', { className: "w-8 text-center text-sm" }, penalties.halfDayPenalty),
                                                        React.createElement('button', {
                                                            onClick: () => updatePenalty(ctv.id, 'halfDayPenalty', penalties.halfDayPenalty + 1),
                                                            className: "bg-red-500 text-white px-2 py-1 rounded text-xs"
                                                        }, '+')
                                                    )
                                                ),
                                                React.createElement('div', { className: "flex items-center justify-between" },
                                                    React.createElement('span', { className: "text-sm" }, 'Ph·∫°t 1 ng√†y:'),
                                                    React.createElement('div', { className: "flex items-center space-x-1" },
                                                        React.createElement('button', {
                                                            onClick: () => updatePenalty(ctv.id, 'fullDayPenalty', penalties.fullDayPenalty - 1),
                                                            className: "bg-red-500 text-white px-2 py-1 rounded text-xs"
                                                        }, '-'),
                                                        React.createElement('span', { className: "w-8 text-center text-sm" }, penalties.fullDayPenalty),
                                                        React.createElement('button', {
                                                            onClick: () => updatePenalty(ctv.id, 'fullDayPenalty', penalties.fullDayPenalty + 1),
                                                            className: "bg-red-500 text-white px-2 py-1 rounded text-xs"
                                                        }, '+')
                                                    )
                                                )
                                            )
                                        ),
                                        
                                        // C√†i ƒë·∫∑t ·∫£nh spam
                                        React.createElement('div', { className: "bg-purple-50 p-3 rounded-lg" },
                                        React.createElement('div', { className: "font-medium text-purple-800 mb-2" }, 'üì∏ ·∫¢nh spam:'),
                                        React.createElement('div', { className: "space-y-2" },
                                            React.createElement('div', { className: "flex items-center justify-between" },
                                                React.createElement('span', { className: "text-sm" }, 'TikTok (0-15):'),
                                                React.createElement('input', {
                                                    type: 'number',
                                                    value: imageSpam.tiktok,
                                                    onChange: (e) => updateImageSpam(ctv.id, 'tiktok', parseInt(e.target.value) || 0),
                                                    className: "w-16 p-1 border border-gray-300 rounded text-center text-sm",
                                                    min: 0,
                                                    max: 15
                                                })
                                            ),
                                            React.createElement('div', { className: "flex items-center justify-between" },
                                                React.createElement('span', { className: "text-sm" }, 'Telegram (0-5):'),
                                                React.createElement('input', {
                                                    type: 'number',
                                                    value: imageSpam.telegram,
                                                    onChange: (e) => updateImageSpam(ctv.id, 'telegram', parseInt(e.target.value) || 0),
                                                    className: "w-16 p-1 border border-gray-300 rounded text-center text-sm",
                                                    min: 0,
                                                    max: 5
                                                })
                                            )
                                        )
                                    ),
                                        
                                        // Danh s√°ch video
                                        React.createElement('div', { className: "bg-green-50 p-3 rounded-lg" },
                                            React.createElement('div', { className: "text-sm text-green-800 mb-2 font-medium" }, 'üìπ Danh s√°ch video:'),
                                            React.createElement('div', { className: "space-y-1" },
                                                ctv.nicks.map((nick, index) => {
                                                    // Ch·ªâ hi·ªÉn th·ªã video theo c√†i ƒë·∫∑t
                                                    const maxVideos = Math.min(systemConfig.videosPerCTV, ctv.nicks.length);
                                                    const isActiveVideo = index < maxVideos;
                                                    const videoRate = isActiveVideo ? getVideoCompletionRate(ctv.id, index) : 0;
                                                    const isDeleted = deletedVideos[`${ctv.id}-${index}`];
                                                    
                                                    return React.createElement('div', {
                                                        key: index,
                                                        className: `flex items-center justify-between flex-wrap gap-1 ${
                                                            !isActiveVideo ? 'opacity-50' : 
                                                            isDeleted ? 'opacity-50' : ''
                                                        }`
                                                    },
                                                        React.createElement('span', { 
                                                            className: `text-xs px-2 py-1 rounded flex-1 min-w-0 ${
                                                                !isActiveVideo ? 'bg-gray-100 text-gray-600' :
                                                                isDeleted ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'
                                                            }`
                                                        }, `${isActiveVideo ? 'Video' : 'D·ª± ph√≤ng'} ${index + 1}: ${nick} ${isDeleted ? '(ƒê√£ x√≥a)' : ''}`),
                                                        isActiveVideo && !isDeleted && React.createElement('span', { 
                                                            className: `text-xs px-2 py-1 rounded ${
                                                                videoRate === 100 ? 'bg-green-100 text-green-800' :
                                                                videoRate > 0 ? 'bg-yellow-100 text-yellow-800' :
                                                                'bg-red-100 text-red-800'
                                                            }`
                                                        }, `${videoRate}%`)
                                                    );
                                                })
                                            ),
                                            React.createElement('div', { className: "mt-2 text-xs text-green-600" },
                                                `‚Ä¢ Video ƒëang ho·∫°t ƒë·ªông: ${Math.min(systemConfig.videosPerCTV, ctv.nicks.length)}/${ctv.nicks.length} nick`,
                                                ctv.nicks.length > systemConfig.videosPerCTV && 
                                                    React.createElement('span', null, ` ‚Ä¢ Nick d·ª± ph√≤ng: ${ctv.nicks.length - systemConfig.videosPerCTV}`)
                                            )
                                        )
                                    )
                                );
                            })
                        )
                    ),

                    // Chi ti·∫øt CTV ƒë∆∞·ª£c ch·ªçn
                    selectedCTV ? React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-3 sm:p-6" },
                        React.createElement('div', { className: "flex items-center justify-between mb-4" },
                            React.createElement('h2', { className: "text-lg sm:text-xl font-semibold text-gray-800" },
                                `Chi ti·∫øt: ${ctvData.find(c => c.id === selectedCTV)?.name}`
                            ),
                            React.createElement('div', { className: "flex items-center space-x-2" },
                                React.createElement('button', {
                                    onClick: () => {
                                        if (confirm(`ƒê√°nh d·∫•u T·∫§T C·∫¢ comment c·ªßa ${ctvData.find(c => c.id === selectedCTV)?.name}?`)) {
                                            markAllVideosCompleted(selectedCTV, true);
                                        }
                                    },
                                    className: "bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-2"
                                },
                                    React.createElement('span', null, '‚úÖ'),
                                    React.createElement('span', null, 'T·∫•t c·∫£ ƒë√£ cmt')
                                ),
                                React.createElement('button', {
                                    onClick: () => {
                                        if (confirm(`B·ªè ƒë√°nh d·∫•u T·∫§T C·∫¢ comment c·ªßa ${ctvData.find(c => c.id === selectedCTV)?.name}?`)) {
                                            markAllVideosCompleted(selectedCTV, false);
                                        }
                                    },
                                    className: "bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-2"
                                },
                                    React.createElement('span', null, 'üîÑ'),
                                    React.createElement('span', null, 'Reset t·∫•t c·∫£')
                                )
                            )
                        ),
                        
                        React.createElement('div', { className: "space-y-4 sm:space-y-6" },
                            // Hi·ªÉn th·ªã t·ª´ng video v√† ai s·∫Ω comment
                            ctvData.find(c => c.id === selectedCTV)?.nicks.map((videoNick, videoIndex) => {
                                // Ch·ªâ hi·ªÉn th·ªã video trong gi·ªõi h·∫°n ho·∫∑c t·∫•t c·∫£ n·∫øu systemConfig cho ph√©p
                                if (videoIndex >= Math.min(systemConfig.videosPerCTV, ctvData.find(c => c.id === selectedCTV)?.nicks.length || 0)) {
                                    return null;
                                }

                                const commenters = getCommenters(selectedCTV);
                                const videoCompletionRate = getVideoCompletionRate(selectedCTV, videoIndex);
                                const isVideoDeleted = deletedVideos[`${selectedCTV}-${videoIndex}`];
                                const hasReplied = repliedComments[`${selectedCTV}-${videoIndex}`];
                                
                                return React.createElement('div', {
                                    key: videoIndex,
                                    className: `p-3 sm:p-4 rounded-lg ${isVideoDeleted ? 'bg-red-50 border border-red-200' : 'bg-blue-50'}`
                                },
                                    React.createElement('div', { className: "flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2" },
                                        React.createElement('h3', { className: `font-medium text-sm sm:text-base ${isVideoDeleted ? 'text-red-800' : 'text-blue-800'}` },
                                            `üìπ Video s·ªë ${videoIndex + 1}: ${videoNick} ${isVideoDeleted ? '(ƒê√£ x√≥a)' : ''}`
                                        ),
                                        !isVideoDeleted && React.createElement('div', { className: "flex items-center space-x-2" },
                                            React.createElement('span', { 
                                                className: `text-sm px-3 py-1 rounded font-medium ${
                                                    videoCompletionRate === 100 ? 'bg-green-100 text-green-800' :
                                                    videoCompletionRate > 0 ? 'bg-yellow-100 text-yellow-800' :
                                                    'bg-red-100 text-red-800'
                                                }`
                                            }, `${videoCompletionRate}%`),
                                            React.createElement('span', { className: "text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded" },
                                                `${Math.round((videoCompletionRate / 100) * systemConfig.commentsPerVideo)}/${systemConfig.commentsPerVideo} ho√†n th√†nh`
                                            )
                                        )
                                    ),

                                    // Checkbox video b·ªã x√≥a
                                    React.createElement('div', { className: "bg-red-50 p-3 rounded-lg mb-4 border border-red-200" },
                                        React.createElement('div', { className: "flex items-center space-x-3" },
                                            React.createElement('input', {
                                                type: 'checkbox',
                                                id: `deleted-${selectedCTV}-${videoIndex}`,
                                                checked: isVideoDeleted || false,
                                                onChange: () => handleDeletedVideoChange(selectedCTV, videoIndex),
                                                className: "w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500 focus:ring-2"
                                            }),
                                            React.createElement('label', {
                                                htmlFor: `deleted-${selectedCTV}-${videoIndex}`,
                                                className: `font-medium cursor-pointer text-sm ${
                                                    isVideoDeleted ? 'text-red-700' : 'text-gray-700'
                                                }`
                                            }, `‚ùå Video b·ªã x√≥a`),
                                            React.createElement('span', { 
                                                className: `text-xs px-2 py-1 rounded ${
                                                    isVideoDeleted ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'
                                                }`
                                            }, isVideoDeleted ? 'ƒê√£ x√≥a' : 'C√≤n video')
                                        )
                                    ),

                                    // Checkbox reply cho ch·ªß video (ch·ªâ hi·ªán khi video ch∆∞a b·ªã x√≥a)
                                    !isVideoDeleted && React.createElement('div', { className: "bg-yellow-50 p-3 rounded-lg mb-4 border border-yellow-200" },
                                        React.createElement('div', { className: "flex items-center space-x-3" },
                                            React.createElement('input', {
                                                type: 'checkbox',
                                                id: `reply-${selectedCTV}-${videoIndex}`,
                                                checked: hasReplied || false,
                                                onChange: () => handleReplyCheckboxChange(selectedCTV, videoIndex),
                                                className: "w-4 h-4 text-yellow-600 bg-gray-100 border-gray-300 rounded focus:ring-yellow-500 focus:ring-2"
                                            }),
                                            React.createElement('label', {
                                                htmlFor: `reply-${selectedCTV}-${videoIndex}`,
                                                className: `font-medium cursor-pointer text-sm ${
                                                    hasReplied ? 'text-green-700' : 'text-yellow-700'
                                                }`
                                            }, `üîÑ CTV ${ctvData.find(c => c.id === selectedCTV)?.name} ƒë√£ rep l·∫°i comment c·ªßa m·ªçi ng∆∞·ªùi`),
                                            React.createElement('span', { 
                                                className: `text-xs px-2 py-1 rounded ${
                                                    hasReplied ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                                                }`
                                            }, hasReplied ? 'ƒê√£ rep' : 'Ch∆∞a rep')
                                        )
                                    ),
                                    
                                    !isVideoDeleted && React.createElement('div', { className: "flex items-center justify-between mb-3" },
                                        React.createElement('div', { className: "text-sm text-blue-700" },
                                            'Danh s√°ch CTV s·∫Ω comment v√†o video n√†y:'
                                        ),
                                        React.createElement('div', { className: "flex items-center space-x-2" },
                                            React.createElement('button', {
                                                onClick: () => {
                                                    if (confirm(`ƒê√°nh d·∫•u t·∫•t c·∫£ CTV ƒë√£ comment v√†o video ${videoIndex + 1}?`)) {
                                                        markAllCommentersCompleted(selectedCTV, videoIndex, true);
                                                    }
                                                },
                                                className: "bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-medium flex items-center space-x-1"
                                            },
                                                React.createElement('span', null, '‚úÖ'),
                                                React.createElement('span', null, 'T·∫•t c·∫£ ƒë√£ cmt')
                                            ),
                                            React.createElement('button', {
                                                onClick: () => {
                                                    if (confirm(`B·ªè ƒë√°nh d·∫•u t·∫•t c·∫£ CTV cho video ${videoIndex + 1}?`)) {
                                                        markAllCommentersCompleted(selectedCTV, videoIndex, false);
                                                    }
                                                },
                                                className: "bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-medium flex items-center space-x-1"
                                            },
                                                React.createElement('span', null, '‚ùå'),
                                                React.createElement('span', null, 'Ch∆∞a cmt')
                                            )
                                        )
                                    ),
                                    
                                    // Danh s√°ch commenters (ch·ªâ hi·ªán khi video ch∆∞a b·ªã x√≥a)
                                    !isVideoDeleted && React.createElement('div', { className: "space-y-2 sm:space-y-3" },
                                        commenters.map(commenterId => {
                                            const commenterCtv = ctvData.find(c => c.id === commenterId);
                                            const key = `${selectedCTV}-${videoIndex}-${commenterId}`;
                                            const isCompleted = completedComments[key] || false;
                                            
                                            return React.createElement('div', {
                                                key: commenterId,
                                                className: `bg-white p-2 sm:p-3 rounded border ${isCompleted ? 'bg-green-50 border-green-200' : 'border-gray-200'}`
                                            },
                                                React.createElement('div', { className: "flex items-center justify-between mb-2" },
                                                    React.createElement('div', { className: "flex items-center space-x-3" },
                                                        React.createElement('input', {
                                                            type: 'checkbox',
                                                            id: `checkbox-${key}`,
                                                            checked: isCompleted,
                                                            onChange: () => handleCheckboxChange(selectedCTV, videoIndex, commenterId),
                                                            className: "w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500 focus:ring-2"
                                                        }),
                                                        React.createElement('label', {
                                                            htmlFor: `checkbox-${key}`,
                                                            className: `font-medium cursor-pointer text-sm sm:text-base ${isCompleted ? 'text-green-700' : 'text-gray-800'}`
                                                        }, `${commenterId}. ${commenterCtv?.name}`)
                                                    ),
                                                    React.createElement('span', { 
                                                        className: `text-xs px-2 py-1 rounded ${
                                                            isCompleted ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                                                        }`
                                                    }, isCompleted ? 'ƒê√£ comment' : 'Ch∆∞a comment')
                                                ),
                                                
                                                React.createElement('div', { className: "text-xs text-gray-600" },
                                                    'S·ª≠ d·ª•ng nick: ',
                                                    React.createElement('span', { className: "font-mono" },
                                                        commenterCtv?.nicks.join(', ')
                                                    )
                                                )
                                            );
                                        })
                                    ),
                                    
                                    !isVideoDeleted && React.createElement('div', { className: "mt-3 pt-3 border-t border-blue-200 text-xs text-blue-600" },
                                        React.createElement('div', null, `‚Ä¢ T·ªïng: ${commenters.length} CTV s·∫Ω comment v√†o video n√†y`),
                                        React.createElement('div', null, `‚Ä¢ ƒê√£ ho√†n th√†nh: ${Math.round((videoCompletionRate / 100) * systemConfig.commentsPerVideo)} comment`),
                                        React.createElement('div', null, `‚Ä¢ C√≤n thi·∫øu: ${systemConfig.commentsPerVideo - Math.round((videoCompletionRate / 100) * systemConfig.commentsPerVideo)} comment`)
                                    ),

                                    // Hi·ªÉn th·ªã th√¥ng b√°o khi video b·ªã x√≥a
                                    isVideoDeleted && React.createElement('div', { className: "text-center p-4 text-red-600 font-medium" },
                                        '‚ö†Ô∏è Video n√†y ƒë√£ b·ªã x√≥a. Kh√¥ng c·∫ßn theo d√µi comment.'
                                    )
                                );
                            }).filter(Boolean)
                        )
                    ) :
                    // T·ªïng quan h·ªá th·ªëng
                    React.createElement('div', { className: "bg-white rounded-lg shadow-lg p-3 sm:p-6" },
                        React.createElement('h2', { className: "text-lg sm:text-xl font-semibold text-gray-800 mb-4" },
                            'üìà T·ªïng quan h·ªá th·ªëng'
                        ),
                        
                        React.createElement('div', { className: "space-y-4" },
                            React.createElement('div', { className: "bg-gray-50 p-3 sm:p-4 rounded-lg" },
                                React.createElement('h3', { className: "font-medium text-gray-800 mb-2 text-sm sm:text-base" }, 'Quy t·∫Øc comment:'),
                                React.createElement('ul', { className: "text-xs sm:text-sm text-gray-600 space-y-1" },
                                    React.createElement('li', null, `‚Ä¢ CTV th·ª© N comment cho ${systemConfig.commentsPerVideo} CTV ti·∫øp theo (N+1 ƒë·∫øn N+${systemConfig.commentsPerVideo})`),
                                    React.createElement('li', null, `‚Ä¢ M·ªói CTV c√≥ ${systemConfig.videosPerCTV} video (t∆∞∆°ng ·ª©ng ${systemConfig.videosPerCTV} nick ƒë·∫ßu)`),
                                    React.createElement('li', null, `‚Ä¢ M·ªói video s·∫Ω nh·∫≠n ƒë∆∞·ª£c ${systemConfig.commentsPerVideo} comment t·ª´ ${systemConfig.commentsPerVideo} CTV kh√°c nhau`),
                                    React.createElement('li', null, '‚Ä¢ Tick checkbox = ƒë√°nh d·∫•u CTV ƒë√£ ho√†n th√†nh comment')
                                )
                            ),
                            
                            React.createElement('div', { className: "bg-indigo-50 p-3 sm:p-4 rounded-lg" },
                                React.createElement('h3', { className: "font-medium text-indigo-800 mb-2 text-sm sm:text-base" }, 'Th·ªëng k√™ t·ªïng:'),
                                React.createElement('div', { className: "grid grid-cols-2 gap-4 text-xs sm:text-sm" },
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "text-indigo-600" }, 'T·ªïng video:'),
                                        React.createElement('div', { className: "font-bold text-indigo-800" }, `${systemConfig.totalCTV * systemConfig.videosPerCTV} video`),
                                        React.createElement('div', { className: "text-xs text-indigo-500" }, `(${systemConfig.totalCTV} CTV √ó ${systemConfig.videosPerCTV} video)`)
                                    ),
                                    React.createElement('div', null,
                                        React.createElement('div', { className: "text-indigo-600" }, 'T·ªïng comment:'),
                                        React.createElement('div', { className: "font-bold text-indigo-800" }, `${systemConfig.totalCTV * systemConfig.videosPerCTV * systemConfig.commentsPerVideo} comment`),
                                        React.createElement('div', { className: "text-xs text-indigo-500" }, `(${systemConfig.totalCTV * systemConfig.videosPerCTV} video √ó ${systemConfig.commentsPerVideo} cmt)`)
                                    )
                                )
                            ),

                            React.createElement('div', { className: "bg-orange-50 p-3 sm:p-4 rounded-lg" },
                                React.createElement('p', { className: "text-xs sm:text-sm text-orange-800" },
                                    'üí° ',
                                    React.createElement('strong', null, 'C√°ch s·ª≠ d·ª•ng:'),
                                    ' Ch·ªçn CTV ƒë·ªÉ xem chi ti·∫øt video v√† comment. Tick checkbox khi CTV ho√†n th√†nh. ƒê√°nh d·∫•u video b·ªã x√≥a v√† reply. Qu·∫£n l√Ω l·ªói, c·∫£nh c√°o, ·∫£nh spam tr·ª±c ti·∫øp trong danh s√°ch CTV!'
                                )
                            ),

                            React.createElement('div', { className: "bg-green-50 p-3 sm:p-4 rounded-lg" },
                                React.createElement('h3', { className: "font-medium text-green-800 mb-2 text-sm sm:text-base" }, '‚ú® T√≠nh nƒÉng m·ªõi:'),
                                React.createElement('ul', { className: "text-xs sm:text-sm text-green-700 space-y-1" },
                                    React.createElement('li', null, '‚Ä¢ ‚ùå ƒê√°nh d·∫•u video b·ªã x√≥a'),
                                    React.createElement('li', null, '‚Ä¢ üîÑ Y√™u c·∫ßu ƒë√°nh d·∫•u reply b·∫Øt bu·ªôc'),
                                    React.createElement('li', null, '‚Ä¢ ‚ÜïÔ∏è Thay ƒë·ªïi th·ª© t·ª± CTV trong danh s√°ch'),
                                    React.createElement('li', null, '‚Ä¢ ‚öôÔ∏è C√†i ƒë·∫∑t s·ªë CTV, comment/video, video/CTV'),
                                    React.createElement('li', null, '‚Ä¢ üì∏ Theo d√µi ·∫£nh spam TikTok (15) v√† Telegram (5)'),
                                    React.createElement('li', null, '‚Ä¢ üí∞ Qu·∫£n l√Ω l·ªói: ph·∫°t 20k, n·ª≠a ng√†y, 1 ng√†y'),
                                    React.createElement('li', null, '‚Ä¢ ‚ö†Ô∏è H·ªá th·ªëng c·∫£nh c√°o 4 c·∫•p ƒë·ªô'),
                                    React.createElement('li', null, '‚Ä¢ üíµ T√≠nh l∆∞∆°ng t·ª± ƒë·ªông (1tr1 - c√°c kho·∫£n ph·∫°t)'),
                                    React.createElement('li', null, '‚Ä¢ üîÑ Reset th√¥ng minh (gi·ªØ l·∫°i l·ªói v√† c·∫£nh c√°o)'),
                                    React.createElement('li', null, '‚Ä¢ üìä T·ª∑ l·ªá ho√†n th√†nh d·ª±a tr√™n tick checkbox')
                                )
                            ),

                            React.createElement('div', { className: "bg-blue-50 p-3 sm:p-4 rounded-lg" },
                                React.createElement('h3', { className: "font-medium text-blue-800 mb-2 text-sm sm:text-base" }, 'üéØ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:'),
                                React.createElement('ul', { className: "text-xs sm:text-sm text-blue-700 space-y-1" },
                                    React.createElement('li', null, '1. Ch·ªçn CTV t·ª´ danh s√°ch b√™n tr√°i'),
                                    React.createElement('li', null, '2. Xem chi ti·∫øt 3 video c·ªßa CTV ƒë√≥'),
                                    React.createElement('li', null, '3. Tick ‚úÖ khi CTV ho√†n th√†nh comment'),
                                    React.createElement('li', null, '4. ƒê√°nh d·∫•u ‚ùå n·∫øu video b·ªã x√≥a'),
                                    React.createElement('li', null, '5. ƒê√°nh d·∫•u üîÑ khi CTV ƒë√£ reply'),
                                    React.createElement('li', null, '6. Qu·∫£n l√Ω l·ªói v√† c·∫£nh c√°o trong danh s√°ch CTV'),
                                    React.createElement('li', null, '7. Theo d√µi ·∫£nh spam v√† l∆∞∆°ng t·ª± ƒë·ªông'),
                                    React.createElement('li', null, '8. Xu·∫•t b√°o c√°o Excel khi c·∫ßn')
                                )
                            )
                        )
                    )
                )
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(CommentManager));

        // H√ÄM XEM TR∆Ø·ªöC LOGIC COMMENT
        const previewCommentLogic = () => {
            const preview = ctvData.map(ctv => {
                const commenters = getCommenters(ctv.id);
                return {
                    ctvId: ctv.id,
                    ctvName: ctv.name,
                    willCommentOn: commenters.map(id => ctvData.find(c => c.id === id)?.name).filter(Boolean)
                };
            });
            
            console.log('Preview Comment Logic:', preview);
            return preview;
        };
    </script>
</body>
</html>
